<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>MediaManagement</title>
        <link rel="icon" type="image/svg" href="https://dfcsoftware.github.io/linux-in-house/images/favicon.svg">
        <link rel="stylesheet" href="https://dfcsoftware.github.io/linux-in-house/theme/css/main.css" type="text/css" />
        <!-- <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />  -->
        <link href="https://dfcsoftware.github.io/linux-in-house/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Linux Home Administration Atom Feed" />
        <meta name="description" content="Media Management (audio/video) This is where I manage Music and Television files. Table of Contents Media Management (audio/video) Music Player..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <table>
                    <td><h1><a href="https://dfcsoftware.github.io/linux-in-house/">Linux Home Administration</a></h1></td>
                    <td> <link href="/linux-in-house/pagefind/pagefind-ui.css" rel="stylesheet" type="text/css">
<script src="/linux-in-house/pagefind/pagefind-ui.js"></script>
<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script> </td>
                </table>
                <nav><ul>
                    <li class="active"><a href="https://dfcsoftware.github.io/linux-in-house/category/linux.html">linux</a></li>
                    <li><a href="https://dfcsoftware.github.io/linux-in-house/category/writing.html">writing</a></li>
                    <li><a href="https://dfcsoftware.github.io/linux-in-house/category/zines.html">zines</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://dfcsoftware.github.io/linux-in-house/mediamanagement.html" rel="bookmark"
           title="Permalink to MediaManagement">MediaManagement</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-01-25T10:20:00-05:00">
                Published: Wed 25 January 2023
        </abbr>
		<br />
        <abbr class="modified" title="2024-04-19T09:30:00-04:00">
                Updated: Fri 19 April 2024
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://dfcsoftware.github.io/linux-in-house/author/don-cohoon.html">Don Cohoon</a>
        </address>
<p>In <a href="https://dfcsoftware.github.io/linux-in-house/category/linux.html">linux</a>.</p>
<p>tags: <a href="https://dfcsoftware.github.io/linux-in-house/tag/systems.html">systems</a> </p>
</footer><!-- /.post-info -->      <h1 id="media-management-audiovideo">Media Management (audio/video)</h1>
<p>This is where I manage Music and Television files.</p>
<p><br/></p>
<hr>
<div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#media-management-audiovideo">Media Management (audio/video)</a><ul>
<li><a href="#music-player-daemon">Music Player Daemon</a><ul>
<li><a href="#mpd-configuration">MPD Configuration</a></li>
<li><a href="#mpd-daemon-processes">MPD Daemon Processes</a><ul>
<li><a href="#linux">Linux</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#audio-player">Audio Player</a></li>
<li><a href="#plex-television-and-music-recordings">Plex Television and Music Recordings</a></li>
<li><a href="#over-the-air-ota-hdhomerun-television-recording">Over-the-Air (OTA) HDHomeRun Television Recording</a><ul>
<li><a href="#copy-tv-recordings">Copy TV Recordings</a></li>
</ul>
</li>
<li><a href="#curseradio">curseradio</a><ul>
<li><a href="#curseradio-configuration-file">curseradio configuration file</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
<hr>
<h2 id="music-player-daemon">Music Player Daemon</h2>
<p>Hardware:</p>
<ul>
<li>BeagleBone AI-32 with Debian Linux</li>
<li>TrueNAS container </li>
</ul>
<p>Software:</p>
<ul>
<li>Linux: mpd (server), and mpc, <a href="/linux-in-house/ncmpcpp.html">ncmpcpp</a> (clients)</li>
</ul>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>mpd<span class="w"> </span>mpc
</code></pre></div>

<ul>
<li>iOS: MaximumMPD (client for iPhone, iPad)</li>
</ul>
<p><img alt="IMG_60BE35F3E1C0-1.jpeg" src="/linux-in-house/images/IMG_60BE35F3E1C0-1%20%282%29.jpeg"></p>
<h3 id="mpd-configuration">MPD Configuration</h3>
<p>File: /etc/mpd.conf</p>
<div class="highlight"><pre><span></span><code><span class="c1"># An example configuration file for MPD.</span>
<span class="c1"># Read the user manual for documentation: http://www.musicpd.org/doc/user/</span>
<span class="c1"># or /usr/share/doc/mpd/html/user.html</span>


<span class="c1"># Files and directories #######################################################</span>
<span class="c1">#</span>
<span class="c1"># This setting controls the top directory which MPD will search to discover the</span>
<span class="c1"># available audio files and add them to the daemon&#39;s online database. This</span>
<span class="c1"># setting defaults to the XDG directory, otherwise the music directory will be</span>
<span class="c1"># be disabled and audio files will only be accepted over ipc socket (using</span>
<span class="c1"># file:// protocol) or streaming files over an accepted protocol.</span>
<span class="c1">#</span>
<span class="n">music_directory</span><span class="w">     </span><span class="s2">&quot;/data/bob/music/Music&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting sets the MPD internal playlist directory. The purpose of this</span>
<span class="c1"># directory is storage for playlists created by MPD. The server will use</span>
<span class="c1"># playlist files not created by the server but only if they are in the MPD</span>
<span class="c1"># format. This setting defaults to playlist saving being disabled.</span>
<span class="c1">#</span>
<span class="n">playlist_directory</span><span class="w">      </span><span class="s2">&quot;/data/bob/music/mpd/playlists&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting sets the location of the MPD database. This file is used to</span>
<span class="c1"># load the database at server start up and store the database while the</span>
<span class="c1"># server is not up. This setting defaults to disabled which will allow</span>
<span class="c1"># MPD to accept files over ipc socket (using file:// protocol) or streaming</span>
<span class="c1"># files over an accepted protocol.</span>
<span class="c1">#</span>
<span class="n">db_file</span><span class="w">         </span><span class="s2">&quot;/data/bob/music/mpd/tag_cache&quot;</span>
<span class="c1">#</span>
<span class="c1"># These settings are the locations for the daemon log files for the daemon.</span>
<span class="c1"># These logs are great for troubleshooting, depending on your log_level</span>
<span class="c1"># settings.</span>
<span class="c1">#</span>
<span class="c1"># The special value &quot;syslog&quot; makes MPD use the local syslog daemon. This</span>
<span class="c1"># setting defaults to logging to syslog, or to journal if mpd was started as</span>
<span class="c1"># a systemd service.</span>
<span class="c1">#</span>
<span class="n">log_file</span><span class="w">            </span><span class="s2">&quot;/var/log/mpd/mpd.log&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting sets the location of the file which stores the process ID</span>
<span class="c1"># for use of mpd --kill and some init scripts. This setting is disabled by</span>
<span class="c1"># default and the pid file will not be stored.</span>
<span class="c1">#</span>
<span class="n">pid_file</span><span class="w">            </span><span class="s2">&quot;/run/mpd/pid&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting sets the location of the file which contains information about</span>
<span class="c1"># most variables to get MPD back into the same general shape it was in before</span>
<span class="c1"># it was brought down. This setting is disabled by default and the server</span>
<span class="c1"># state will be reset on server start up.</span>
<span class="c1">#</span>
<span class="n">state_file</span><span class="w">          </span><span class="s2">&quot;/data/bob/music/mpd/state&quot;</span>
<span class="c1">#</span>
<span class="c1"># The location of the sticker database.  This is a database which</span>
<span class="c1"># manages dynamic information attached to songs.</span>
<span class="c1">#</span>
<span class="n">sticker_file</span><span class="w">                   </span><span class="s2">&quot;/data/bob/music/mpd/sticker.sql&quot;</span>
<span class="c1">#</span>
<span class="c1">###############################################################################</span>


<span class="c1"># General music daemon options ################################################</span>
<span class="c1">#</span>
<span class="c1"># This setting specifies the user that MPD will run as. MPD should never run as</span>
<span class="c1"># root and you may use this setting to make MPD change its user ID after</span>
<span class="c1"># initialization. This setting is disabled by default and MPD is run as the</span>
<span class="c1"># current user.</span>
<span class="c1">#</span>
<span class="n">user</span><span class="w">                </span><span class="s2">&quot;mpd&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting specifies the group that MPD will run as. If not specified</span>
<span class="c1"># primary group of user specified with &quot;user&quot; setting will be used (if set).</span>
<span class="c1"># This is useful if MPD needs to be a member of group such as &quot;audio&quot; to</span>
<span class="c1"># have permission to use sound card.</span>
<span class="c1">#</span>
<span class="c1">#group                          &quot;nogroup&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting sets the address for the daemon to listen on. Careful attention</span>
<span class="c1"># should be paid if this is assigned to anything other then the default, any.</span>
<span class="c1"># This setting can deny access to control of the daemon. Choose any if you want</span>
<span class="c1"># to have mpd listen on every address. Not effective if systemd socket</span>
<span class="c1"># activation is in use.</span>
<span class="c1">#</span>
<span class="c1"># For network</span>
<span class="c1">#bind_to_address        &quot;localhost&quot;</span>
<span class="n">bind_to_address</span><span class="w">     </span><span class="s2">&quot;0.0.0.0&quot;</span>
<span class="c1">#</span>
<span class="c1"># And for Unix Socket</span>
<span class="c1">#bind_to_address        &quot;/run/mpd/socket&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting is the TCP port that is desired for the daemon to get assigned</span>
<span class="c1"># to.</span>
<span class="c1">#</span>
<span class="n">port</span><span class="w">                </span><span class="s2">&quot;6600&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting controls the type of information which is logged. Available</span>
<span class="c1"># setting arguments are &quot;default&quot;, &quot;secure&quot; or &quot;verbose&quot;. The &quot;verbose&quot; setting</span>
<span class="c1"># argument is recommended for troubleshooting, though can quickly stretch</span>
<span class="c1"># available resources on limited hardware storage.</span>
<span class="c1">#</span>
<span class="c1">#log_level          &quot;default&quot;</span>
<span class="c1">#</span>
<span class="c1"># Setting &quot;restore_paused&quot; to &quot;yes&quot; puts MPD into pause mode instead</span>
<span class="c1"># of starting playback after startup.</span>
<span class="c1">#</span>
<span class="c1">#restore_paused &quot;no&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting enables MPD to create playlists in a format usable by other</span>
<span class="c1"># music players.</span>
<span class="c1">#</span>
<span class="c1">#save_absolute_paths_in_playlists   &quot;no&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting defines a list of tag types that will be extracted during the</span>
<span class="c1"># audio file discovery process. The complete list of possible values can be</span>
<span class="c1"># found in the user manual.</span>
<span class="c1">#metadata_to_use    &quot;artist,album,title,track,name,genre,date,composer,performer,disc&quot;</span>
<span class="c1">#</span>
<span class="c1"># This example just enables the &quot;comment&quot; tag without disabling all</span>
<span class="c1"># the other supported tags:</span>
<span class="c1">#metadata_to_use &quot;+comment&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting enables automatic update of MPD&#39;s database when files in</span>
<span class="c1"># music_directory are changed.</span>
<span class="c1">#</span>
<span class="c1">#auto_update    &quot;yes&quot;</span>
<span class="c1">#</span>
<span class="c1"># Limit the depth of the directories being watched, 0 means only watch</span>
<span class="c1"># the music directory itself.  There is no limit by default.</span>
<span class="c1">#</span>
<span class="c1">#auto_update_depth &quot;3&quot;</span>
<span class="c1">#</span>
<span class="c1">###############################################################################</span>


<span class="c1"># Symbolic link behavior ######################################################</span>
<span class="c1">#</span>
<span class="c1"># If this setting is set to &quot;yes&quot;, MPD will discover audio files by following</span>
<span class="c1"># symbolic links outside of the configured music_directory.</span>
<span class="c1">#</span>
<span class="c1">#follow_outside_symlinks    &quot;yes&quot;</span>
<span class="c1">#</span>
<span class="c1"># If this setting is set to &quot;yes&quot;, MPD will discover audio files by following</span>
<span class="c1"># symbolic links inside of the configured music_directory.</span>
<span class="c1">#</span>
<span class="c1">#follow_inside_symlinks     &quot;yes&quot;</span>
<span class="c1">#</span>
<span class="c1">###############################################################################</span>


<span class="c1"># Zeroconf / Avahi Service Discovery ##########################################</span>
<span class="c1">#</span>
<span class="c1"># If this setting is set to &quot;yes&quot;, service information will be published with</span>
<span class="c1"># Zeroconf / Avahi.</span>
<span class="c1">#</span>
<span class="c1">#zeroconf_enabled       &quot;yes&quot;</span>
<span class="c1">#</span>
<span class="c1"># The argument to this setting will be the Zeroconf / Avahi unique name for</span>
<span class="c1"># this MPD server on the network. %h will be replaced with the hostname.</span>
<span class="c1">#</span>
<span class="c1">#zeroconf_name          &quot;Music Player @ %h&quot;</span>
<span class="c1">#</span>
<span class="c1">###############################################################################</span>


<span class="c1"># Permissions #################################################################</span>
<span class="c1">#</span>
<span class="c1"># If this setting is set, MPD will require password authorization. The password</span>
<span class="c1"># setting can be specified multiple times for different password profiles.</span>
<span class="c1">#</span>
<span class="c1">#password                        &quot;password@read,add,control,admin&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting specifies the permissions a user has who has not yet logged in.</span>
<span class="c1">#</span>
<span class="c1">#default_permissions             &quot;read,add,control,admin&quot;</span>
<span class="c1">#</span>
<span class="c1">###############################################################################</span>


<span class="c1"># Database #######################################################################</span>
<span class="c1">#</span>

<span class="c1">#database {</span>
<span class="c1">#       plugin &quot;proxy&quot;</span>
<span class="c1">#       host &quot;other.mpd.host&quot;</span>
<span class="c1">#       port &quot;6600&quot;</span>
<span class="c1">#}</span>

<span class="c1"># Input #######################################################################</span>
<span class="c1">#</span>

<span class="n">input</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">plugin</span><span class="w"> </span><span class="s2">&quot;curl&quot;</span>
<span class="c1">#       proxy &quot;proxy.isp.com:8080&quot;</span>
<span class="c1">#       proxy_user &quot;user&quot;</span>
<span class="c1">#       proxy_password &quot;password&quot;</span>
<span class="p">}</span>

<span class="c1"># QOBUZ input plugin</span>
<span class="n">input</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">enabled</span><span class="w">    </span><span class="s2">&quot;no&quot;</span>
<span class="w">        </span><span class="n">plugin</span><span class="w">     </span><span class="s2">&quot;qobuz&quot;</span>
<span class="c1">#        app_id     &quot;ID&quot;</span>
<span class="c1">#        app_secret &quot;SECRET&quot;</span>
<span class="c1">#        username   &quot;USERNAME&quot;</span>
<span class="c1">#        password   &quot;PASSWORD&quot;</span>
<span class="c1">#        format_id  &quot;N&quot;</span>
<span class="p">}</span>

<span class="c1"># TIDAL input plugin</span>
<span class="n">input</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">enabled</span><span class="w">      </span><span class="s2">&quot;no&quot;</span>
<span class="w">        </span><span class="n">plugin</span><span class="w">       </span><span class="s2">&quot;tidal&quot;</span>
<span class="c1">#        token        &quot;TOKEN&quot;</span>
<span class="c1">#        username     &quot;USERNAME&quot;</span>
<span class="c1">#        password     &quot;PASSWORD&quot;</span>
<span class="c1">#        audioquality &quot;Q&quot;</span>
<span class="p">}</span>

<span class="c1"># Decoder #####################################################################</span>
<span class="c1">#</span>

<span class="n">decoder</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">plugin</span><span class="w">                  </span><span class="s2">&quot;hybrid_dsd&quot;</span>
<span class="w">        </span><span class="n">enabled</span><span class="w">                 </span><span class="s2">&quot;no&quot;</span>
<span class="c1">#       gapless                 &quot;no&quot;</span>
<span class="p">}</span>

<span class="c1">#</span>
<span class="c1">###############################################################################</span>

<span class="c1"># Audio Output ################################################################</span>
<span class="c1">#</span>
<span class="c1"># MPD supports various audio output types, as well as playing through multiple</span>
<span class="c1"># audio outputs at the same time, through multiple audio_output settings</span>
<span class="c1"># blocks. Setting this block is optional, though the server will only attempt</span>
<span class="c1"># autodetection for one sound card.</span>
<span class="c1">#</span>
<span class="c1"># An example of an ALSA output:</span>
<span class="c1">#</span>
<span class="n">audio_output</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">type</span><span class="w">        </span><span class="s2">&quot;alsa&quot;</span>
<span class="w">    </span><span class="n">name</span><span class="w">        </span><span class="s2">&quot;Sabrent ALSA Device&quot;</span>
<span class="w">    </span><span class="n">device</span><span class="w">      </span><span class="s2">&quot;hw:1&quot;</span><span class="w">  </span><span class="c1"># optional</span>
<span class="c1">#   device      &quot;hw:0,0&quot;    # optional</span>
<span class="c1">#   mixer_type      &quot;hardware&quot;      # optional</span>
<span class="c1">#   mixer_device    &quot;default&quot;   # optional</span>
<span class="c1">#   mixer_control   &quot;PCM&quot;       # optional</span>
<span class="c1">#   mixer_index &quot;0&quot;     # optional</span>
<span class="p">}</span>
<span class="c1">#</span>
<span class="c1"># Bluetooth through pulesaudio</span>
<span class="c1">#audio_output {</span>
<span class="c1">#  type “pulse”</span>
<span class="c1">#  name “FOSI Audio”</span>
<span class="c1">#  mixer_type “none”</span>
<span class="c1">#  sink “bluez_sink.7C:58:CA:00:19:63.a2dp_sink”</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1"># An example of an OSS output:</span>
<span class="c1">#</span>
<span class="c1">#audio_output {</span>
<span class="c1">#   type        &quot;oss&quot;</span>
<span class="c1">#   name        &quot;My OSS Device&quot;</span>
<span class="c1">#   device      &quot;/dev/dsp&quot;  # optional</span>
<span class="c1">#   mixer_type      &quot;hardware&quot;      # optional</span>
<span class="c1">#   mixer_device    &quot;/dev/mixer&quot;    # optional</span>
<span class="c1">#   mixer_control   &quot;PCM&quot;       # optional</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1"># An example of a shout output (for streaming to Icecast):</span>
<span class="c1">#</span>
<span class="c1">#audio_output {</span>
<span class="c1">#   type        &quot;shout&quot;</span>
<span class="c1">#   encoder     &quot;vorbis&quot;        # optional</span>
<span class="c1">#   name        &quot;My Shout Stream&quot;</span>
<span class="c1">#   host        &quot;localhost&quot;</span>
<span class="c1">#   port        &quot;8000&quot;</span>
<span class="c1">#   mount       &quot;/mpd.ogg&quot;</span>
<span class="c1">#   password    &quot;hackme&quot;</span>
<span class="c1">#   quality     &quot;5.0&quot;</span>
<span class="c1">#   bitrate     &quot;128&quot;</span>
<span class="c1">#   format      &quot;44100:16:1&quot;</span>
<span class="c1">#   protocol    &quot;icecast2&quot;      # optional</span>
<span class="c1">#   user        &quot;source&quot;        # optional</span>
<span class="c1">#   description &quot;My Stream Description&quot; # optional</span>
<span class="c1">#   url             &quot;http://example.com&quot;    # optional</span>
<span class="c1">#   genre       &quot;jazz&quot;          # optional</span>
<span class="c1">#   public      &quot;no&quot;            # optional</span>
<span class="c1">#   timeout     &quot;2&quot;         # optional</span>
<span class="c1">#   mixer_type      &quot;software&quot;              # optional</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1"># An example of a recorder output:</span>
<span class="c1">#</span>
<span class="c1">#audio_output {</span>
<span class="c1">#       type            &quot;recorder&quot;</span>
<span class="c1">#       name            &quot;My recorder&quot;</span>
<span class="c1">#       encoder         &quot;vorbis&quot;                # optional, vorbis or lame</span>
<span class="c1">#       path            &quot;/var/lib/mpd/recorder/mpd.ogg&quot;</span>
<span class="c1">##      quality         &quot;5.0&quot;                   # do not define if bitrate is defined</span>
<span class="c1">#       bitrate         &quot;128&quot;                   # do not define if quality is defined</span>
<span class="c1">#       format          &quot;44100:16:1&quot;</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1"># An example of a httpd output (built-in HTTP streaming server):</span>
<span class="c1">#</span>
<span class="n">audio_output</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">type</span><span class="w">        </span><span class="s2">&quot;httpd&quot;</span>
<span class="w">    </span><span class="n">name</span><span class="w">        </span><span class="s2">&quot;My HTTP Stream&quot;</span>
<span class="w">    </span><span class="n">encoder</span><span class="w">     </span><span class="s2">&quot;vorbis&quot;</span><span class="w">        </span><span class="c1"># optional, vorbis or lame</span>
<span class="w">    </span><span class="n">port</span><span class="w">        </span><span class="s2">&quot;8888&quot;</span>
<span class="w">    </span><span class="n">bind_to_address</span><span class="w"> </span><span class="s2">&quot;0.0.0.0&quot;</span><span class="w">               </span><span class="c1"># optional, IPv4 or IPv6</span>
<span class="w">    </span><span class="c1">#quality        &quot;5.0&quot;           # do not define if bitrate is defined</span>
<span class="w">    </span><span class="n">bitrate</span><span class="w">     </span><span class="s2">&quot;128&quot;</span><span class="w">           </span><span class="c1"># do not define if quality is defined</span>
<span class="w">    </span><span class="n">format</span><span class="w">      </span><span class="s2">&quot;44100:16:1&quot;</span>
<span class="w">    </span><span class="n">max_clients</span><span class="w">     </span><span class="s2">&quot;2&quot;</span><span class="w">                     </span><span class="c1"># optional 0=no limit</span>
<span class="p">}</span>
<span class="c1">#</span>
<span class="c1"># An example of a pulseaudio output (streaming to a remote pulseaudio server)</span>
<span class="c1"># Please see README.Debian if you want mpd to play through the pulseaudio</span>
<span class="c1"># daemon started as part of your graphical desktop session!</span>
<span class="c1">#</span>
<span class="c1">#audio_output {</span>
<span class="c1">#   type        &quot;pulse&quot;</span>
<span class="c1">#   name        &quot;My Pulse Output&quot;</span>
<span class="c1">#   server      &quot;remote_server&quot;     # optional</span>
<span class="c1">#   sink        &quot;remote_server_sink&quot;    # optional</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1"># An example of a winmm output (Windows multimedia API).</span>
<span class="c1">#</span>
<span class="c1">#audio_output {</span>
<span class="c1">#   type        &quot;winmm&quot;</span>
<span class="c1">#   name        &quot;My WinMM output&quot;</span>
<span class="c1">#   device      &quot;Digital Audio (S/PDIF) (High Definition Audio Device)&quot; # optional</span>
<span class="c1">#       or</span>
<span class="c1">#   device      &quot;0&quot;     # optional</span>
<span class="c1">#   mixer_type  &quot;hardware&quot;  # optional</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1"># An example of an openal output.</span>
<span class="c1">#</span>
<span class="c1">#audio_output {</span>
<span class="c1">#   type        &quot;openal&quot;</span>
<span class="c1">#   name        &quot;My OpenAL output&quot;</span>
<span class="c1">#   device      &quot;Digital Audio (S/PDIF) (High Definition Audio Device)&quot; # optional</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1">## Example &quot;pipe&quot; output:</span>
<span class="c1">#</span>
<span class="c1">#audio_output {</span>
<span class="c1">#   type        &quot;pipe&quot;</span>
<span class="c1">#   name        &quot;my pipe&quot;</span>
<span class="c1">#   command     &quot;aplay -f cd 2&gt;/dev/null&quot;</span>
<span class="c1">## Or if you&#39;re want to use AudioCompress</span>
<span class="c1">#   command     &quot;AudioCompress -m | aplay -f cd 2&gt;/dev/null&quot;</span>
<span class="c1">## Or to send raw PCM stream through PCM:</span>
<span class="c1">#   command     &quot;nc example.org 8765&quot;</span>
<span class="c1">#   format      &quot;44100:16:2&quot;</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1">## An example of a null output (for no audio output):</span>
<span class="c1">#</span>
<span class="c1">#audio_output {</span>
<span class="c1">#   type        &quot;null&quot;</span>
<span class="c1">#   name        &quot;My Null Output&quot;</span>
<span class="c1">#   mixer_type      &quot;none&quot;                  # optional</span>
<span class="c1">#}</span>
<span class="c1">#</span>
<span class="c1">###############################################################################</span>


<span class="c1"># Normalization automatic volume adjustments ##################################</span>
<span class="c1">#</span>
<span class="c1"># This setting specifies the type of ReplayGain to use. This setting can have</span>
<span class="c1"># the argument &quot;off&quot;, &quot;album&quot;, &quot;track&quot; or &quot;auto&quot;. &quot;auto&quot; is a special mode that</span>
<span class="c1"># chooses between &quot;track&quot; and &quot;album&quot; depending on the current state of</span>
<span class="c1"># random playback. If random playback is enabled then &quot;track&quot; mode is used.</span>
<span class="c1"># See &lt;http://www.replaygain.org&gt; for more details about ReplayGain.</span>
<span class="c1"># This setting is off by default.</span>
<span class="c1">#</span>
<span class="c1">#replaygain         &quot;album&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting sets the pre-amp used for files that have ReplayGain tags. By</span>
<span class="c1"># default this setting is disabled.</span>
<span class="c1">#</span>
<span class="c1">#replaygain_preamp      &quot;0&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting sets the pre-amp used for files that do NOT have ReplayGain tags.</span>
<span class="c1"># By default this setting is disabled.</span>
<span class="c1">#</span>
<span class="c1">#replaygain_missing_preamp  &quot;0&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting enables or disables ReplayGain limiting.</span>
<span class="c1"># MPD calculates actual amplification based on the ReplayGain tags</span>
<span class="c1"># and replaygain_preamp / replaygain_missing_preamp setting.</span>
<span class="c1"># If replaygain_limit is enabled MPD will never amplify audio signal</span>
<span class="c1"># above its original level. If replaygain_limit is disabled such amplification</span>
<span class="c1"># might occur. By default this setting is enabled.</span>
<span class="c1">#</span>
<span class="c1">#replaygain_limit       &quot;yes&quot;</span>
<span class="c1">#</span>
<span class="c1"># This setting enables on-the-fly normalization volume adjustment. This will</span>
<span class="c1"># result in the volume of all playing audio to be adjusted so the output has</span>
<span class="c1"># equal &quot;loudness&quot;. This setting is disabled by default.</span>
<span class="c1">#</span>
<span class="c1">#volume_normalization       &quot;no&quot;</span>
<span class="c1">#</span>
<span class="c1">###############################################################################</span>

<span class="c1"># Character Encoding ##########################################################</span>
<span class="c1">#</span>
<span class="c1"># If file or directory names do not display correctly for your locale then you</span>
<span class="c1"># may need to modify this setting.</span>
<span class="c1">#</span>
<span class="n">filesystem_charset</span><span class="w">      </span><span class="s2">&quot;UTF-8&quot;</span>
<span class="c1">#</span>
<span class="c1">###############################################################################</span>
</code></pre></div>

<h3 id="mpd-daemon-processes">MPD Daemon Processes</h3>
<p>These configurations keep the mpd daemon running after boot and restarted upon any failure.</p>
<h4 id="linux">Linux</h4>
<p>FIle: /lib/systemd/system/mpd.service</p>
<div class="highlight"><pre><span></span><code><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">Music Player Daemon</span>
<span class="na">Documentation</span><span class="o">=</span><span class="s">man:mpd(1) man:mpd.conf(5)</span>
<span class="na">Documentation</span><span class="o">=</span><span class="s">file:///usr/share/doc/mpd/user-manual.html</span>
<span class="na">After</span><span class="o">=</span><span class="s">network.target sound.target</span>

<span class="k">[Service]</span>
<span class="na">Type</span><span class="o">=</span><span class="s">notify</span>
<span class="na">EnvironmentFile</span><span class="o">=</span><span class="s">/etc/default/mpd</span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/usr/bin/mpd --no-daemon $MPDCONF</span>

<span class="c1"># Enable this setting to ask systemd to watch over MPD, see</span>
<span class="c1"># systemd.service(5).  This is disabled by default because it causes</span>
<span class="c1"># periodic wakeups which are unnecessary if MPD is not playing.</span>
<span class="c1">#WatchdogSec=120</span>

<span class="c1"># allow MPD to use real-time priority 50</span>
<span class="na">LimitRTPRIO</span><span class="o">=</span><span class="s">50</span>
<span class="na">LimitRTTIME</span><span class="o">=</span><span class="s">infinity</span>

<span class="c1"># disallow writing to /usr, /bin, /sbin, ...</span>
<span class="na">ProtectSystem</span><span class="o">=</span><span class="s">yes</span>

<span class="c1"># more paranoid security settings</span>
<span class="na">NoNewPrivileges</span><span class="o">=</span><span class="s">yes</span>
<span class="na">ProtectKernelTunables</span><span class="o">=</span><span class="s">yes</span>
<span class="na">ProtectControlGroups</span><span class="o">=</span><span class="s">yes</span>
<span class="na">ProtectKernelModules</span><span class="o">=</span><span class="s">yes</span>
<span class="c1"># AF_NETLINK is required by libsmbclient, or it will exit() .. *sigh*</span>
<span class="na">RestrictAddressFamilies</span><span class="o">=</span><span class="s">AF_INET AF_INET6 AF_UNIX AF_NETLINK</span>
<span class="na">RestrictNamespaces</span><span class="o">=</span><span class="s">yes</span>

<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span>
<span class="na">Also</span><span class="o">=</span><span class="s">mpd.socket</span>
</code></pre></div>

<h2 id="audio-player">Audio Player</h2>
<p>Hardware:</p>
<ul>
<li>host (BeagleBone AI-64 Debian Linux).</li>
</ul>
<p>Software:</p>
<ul>
<li>Linux: NextCloud app called <strong>audioplayer</strong>, visible on  NextCloud web interface</li>
</ul>
<p>The music files reside in the /Music directory of the nextcloud account.</p>
<p><img alt="Audio-Player.png" src="/linux-in-house/images/Audio-Player.png"></p>
<p>Reference: <a href="https://apps.nextcloud.com/apps/audioplayer">https://apps.nextcloud.com/apps/audioplayer</a></p>
<h2 id="plex-television-and-music-recordings">Plex Television and Music Recordings</h2>
<p>This is where most TV shows are played from, on either one of the Apple-TVs.</p>
<p>Hardware:</p>
<ul>
<li>TrueNAS Scale container</li>
</ul>
<p>Software:</p>
<ul>
<li>Debian: Plex Media Server app, Web Interface <a href="http://127.0.0.1:32400/web/index.html#!/">http://127.0.0.1:32400/web/index.html#!/</a></li>
<li>iOS: Plexamp (Music) on the Phone or Tablet</li>
</ul>
<p><img alt="IMG_233B4FCE41DA-1.jpeg" src="/linux-in-house/images/IMG_233B4FCE41DA-1.jpeg"></p>
<ul>
<li>tvOS: Plex (Video, Music) on the Apple-TV</li>
</ul>
<p>Libraries:</p>
<ul>
<li>TV: /tv_share/tv (Recordings come from OTA HDHomeRun below)</li>
<li>Movies: ~/tv_share/movies</li>
<li>Music: ~/nextcloud/Music</li>
</ul>
<p>Reference: <a href="https://www.plex.tv/media-server-downloads/">https://www.plex.tv/media-server-downloads/</a></p>
<h2 id="over-the-air-ota-hdhomerun-television-recording">Over-the-Air (OTA) HDHomeRun Television Recording</h2>
<p>Hardware:</p>
<ul>
<li>host HDHomeRun (Silicondust Engineering Flex-4; <a href="https://www.silicondust.com/product/hdhomerun-flex-4k/">https://www.silicondust.com/product/hdhomerun-flex-4k/</a>) with 2TB USB SSD locally attached.</li>
</ul>
<p>Software:</p>
<ul>
<li>Built-in webservice on port 80 (<a href="http://hdhomerun.local/">http://hdhomerun.local/</a>)</li>
<li>iOS: HDHomeRun (Used to set recordings and delete old shows on the HDHomeRun box)</li>
</ul>
<p><img alt="IMG_5456720E92DB-1.jpeg" src="/linux-in-house/images/IMG_5456720E92DB-1.jpeg"></p>
<ul>
<li>Application Programming Interface (API): <a href="https://info.hdhomerun.com/info/http_api">https://info.hdhomerun.com/info/http_api</a></li>
</ul>
<h3 id="copy-tv-recordings">Copy TV Recordings</h3>
<p>The actual recording from OTA happens on the HDHomeRun box, and I copy the recordings into a Plex library using the HDHomeRun web interface. This is scheduled once a day in cron.</p>
<p>File: \~/tv_share/tv/hdhomerun/get.sh</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#-------------------------------------------------</span>
<span class="c1"># File get.sh</span>
<span class="c1"># Usage: get.sh</span>
<span class="c1">#   Set the IP address of the HDHomeRun Flex box</span>
<span class="c1">#    with DVR USB disk attached</span>
<span class="c1">#</span>
<span class="c1"># Purpose: Copy recordings to the shared filesystem </span>
<span class="c1">#   so they can be played by other software,</span>
<span class="c1">#   i.e.: Plex, Infuse, VLC, etc...</span>
<span class="c1">#</span>
<span class="c1"># Dependencies: </span>
<span class="c1">#  -apt install jq. </span>
<span class="c1">#  -curl is installed by normal OS. </span>
<span class="c1">#  -silicondust.com DVR subscription</span>
<span class="c1">#   required to record on the device, $35 annual</span>
<span class="c1">#   hdhomerun_config also from silicondust.com</span>
<span class="c1">#</span>
<span class="c1"># History:</span>
<span class="c1">#  Date        Author      Description</span>
<span class="c1"># -----------  ----------  -----------------------</span>
<span class="c1"># 22-Jul-2021  Don Cohoon  Created on MacOS</span>
<span class="c1"># 20-Jan-2023  Don Cohoon  Added REAL_URL because</span>
<span class="c1">#  firmware release kept ${IP} as file name causing</span>
<span class="c1">#   of zero byte files</span>
<span class="c1">#-------------------------------------------------</span>
<span class="nv">MYHOME</span><span class="o">=</span><span class="s2">&quot;/mnt/vol032&quot;</span>
<span class="nv">MYDIR</span><span class="o">=</span><span class="s2">&quot;tv_share/tv&quot;</span>
<span class="nv">MYTESTFILE</span><span class="o">=</span><span class="si">${</span><span class="nv">MYHOME</span><span class="si">}</span>/tv_share/get.sh
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
<span class="c1">#-------------------------------------------------</span>
<span class="c1"># Log</span>
<span class="k">function</span><span class="w"> </span>logit<span class="o">()</span>
<span class="o">{</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$@</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">0</span><span class="si">}</span><span class="w"> </span><span class="k">$(</span>/bin/date<span class="k">)</span><span class="w"> </span>:<span class="w"> </span><span class="nv">$@</span><span class="w"> </span>&gt;&gt;hdhomerun.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="o">}</span>

<span class="c1">#-------------------------------------------------</span>
<span class="c1"># Ensure we move to correct directory</span>
<span class="c1">#</span>
<span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">MYHOME</span><span class="si">}</span>/<span class="si">${</span><span class="nv">MYDIR</span><span class="si">}</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span><span class="si">${</span><span class="nv">MYTESTFILE</span><span class="si">}</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span>logit<span class="w"> </span><span class="s2">&quot;=&gt; Cannot change to </span><span class="si">${</span><span class="nv">MYHOME</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">MYDIR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">exit</span><span class="w"> </span><span class="m">2</span>
<span class="k">fi</span>

<span class="c1">#-------------------------------------------------</span>
<span class="c1"># Get IP address of TV Server</span>
<span class="c1">#</span>
<span class="nv">IP</span><span class="o">=</span><span class="k">$(</span>/usr/local/bin/hdhomerun_config<span class="w"> </span>discover<span class="p">|</span>awk<span class="w"> </span><span class="s1">&#39;{print $6}&#39;</span><span class="k">)</span>
logit<span class="w"> </span><span class="s2">&quot;=&gt; IP address of TV server is </span><span class="si">${</span><span class="nv">IP</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1">#-------------------------------------------------</span>
<span class="c1"># Get Record engine status </span>
<span class="c1">#</span>
logit<span class="w"> </span><span class="s2">&quot;=&gt; discover.json&quot;</span>
/usr/bin/curl<span class="w"> </span>-s<span class="w"> </span>http://<span class="si">${</span><span class="nv">IP</span><span class="si">}</span>/discover.json<span class="w"> </span>&gt;discover.json<span class="w"> </span><span class="m">2</span>&gt;&gt;hdhomerun.log
<span class="c1">#                             ^</span>
<span class="c1">#cat discover.json</span>
<span class="c1">#logit </span>
<span class="c1">#logit &quot;. . .&quot;</span>

<span class="c1">#-------------------------------------------------</span>
<span class="c1"># Get recorded_files.json from root of dvr</span>
<span class="c1">#</span>
logit<span class="w"> </span><span class="s2">&quot;=&gt; recorded_files.json&quot;</span>
/usr/bin/curl<span class="w"> </span>-s<span class="w">  </span>--header<span class="w"> </span><span class="s1">&#39;Accept: */*&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--header<span class="w"> </span><span class="s1">&#39;Accept-Encoding: gzip, deflate&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--header<span class="w"> </span><span class="s1">&#39;Accept-Language: en-US,en;q=0.5&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--header<span class="w"> </span><span class="s1">&#39;Cache-Control: no-cache&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--header<span class="w"> </span><span class="s1">&#39;Connection: keep-alive&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--header<span class="w"> </span><span class="s1">&#39;Pragma: no cache&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--header<span class="w"> </span><span class="s2">&quot;Host: </span><span class="si">${</span><span class="nv">IP</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--header<span class="w"> </span><span class="s2">&quot;Referer: http://</span><span class="si">${</span><span class="nv">IP</span><span class="si">}</span><span class="s2">/recorded_files.html&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">         </span>--header<span class="w"> </span><span class="s1">&#39;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://<span class="si">${</span><span class="nv">IP</span><span class="si">}</span>/recorded_files.json?DisplayGroupID<span class="o">=</span>root<span class="w"> </span>&gt;<span class="w"> </span>recorded_files.json<span class="w"> </span><span class="m">2</span>&gt;&gt;hdhomerun.log
<span class="w">  </span><span class="c1">#            ^                   ^              ^ </span>
<span class="c1">#cat recorded_files.json </span>
<span class="c1">#logit </span>
<span class="c1">#logit &quot;. . .&quot;</span>

<span class="c1">#-------------------------------------------------</span>
<span class="c1"># Get root SeriesIDs from recorded_files.json</span>
<span class="c1">#</span>
<span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>SeriesID
<span class="nv">SeriesID</span><span class="o">=(</span><span class="k">$(</span>/usr/bin/jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.[] | .SeriesID&#39;</span><span class="w"> </span>recorded_files.json<span class="k">)</span><span class="o">)</span>
<span class="c1">#for (( i = 0 ; i &lt; ${#SeriesID[@]} ; i++))</span>
<span class="c1">#do</span>
<span class="c1">#  logit &quot;Series [$i]: ${SeriesID[$i]}&quot;</span>
<span class="c1">#done</span>

<span class="c1">#-------------------------------------------------</span>
<span class="c1"># Get root Titles from recorded_files.json</span>
<span class="c1">#</span>
<span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>Title
/usr/bin/jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.[] | .Title&#39;</span><span class="w"> </span>recorded_files.json<span class="w"> </span>&gt;<span class="w"> </span>recorded_files.title
<span class="nb">let</span><span class="w"> </span><span class="nv">i</span><span class="o">=</span><span class="m">0</span>
<span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>t
<span class="k">do</span>
<span class="w">  </span><span class="c1"># Add new element at the end of the array</span>
<span class="w">  </span><span class="nv">Title</span><span class="o">+=(</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">t</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">)</span>
<span class="w">  </span>logit<span class="w"> </span><span class="s2">&quot;Title [</span><span class="nv">$i</span><span class="s2">]: </span><span class="si">${</span><span class="nv">Title</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">let</span><span class="w"> </span>i++
<span class="k">done</span><span class="w"> </span>&lt;<span class="w"> </span>recorded_files.title
rm<span class="w"> </span>recorded_files.title
<span class="c1">#</span>

<span class="c1">#-------------------------------------------------</span>
<span class="c1"># Get SeriesID recordings, into &quot;Title&quot;/recorded_files.json</span>
<span class="c1">#</span>
<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">iSeriesID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>iSeriesID<span class="w"> </span>&lt;<span class="w"> </span><span class="si">${#</span><span class="nv">SeriesID</span><span class="p">[@]</span><span class="si">}</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>iSeriesID++<span class="o">))</span>
<span class="k">do</span>
<span class="w">  </span><span class="c1"># Put Series into Title directory</span>
<span class="w">  </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Title</span><span class="p">[</span><span class="nv">$iSeriesID</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">cd</span><span class="w">       </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Title</span><span class="p">[</span><span class="nv">$iSeriesID</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">  </span>logit<span class="w"> </span><span class="s2">&quot;Downloading Series : </span><span class="si">${</span><span class="nv">Title</span><span class="p">[</span><span class="nv">$iSeriesID</span><span class="p">]</span><span class="si">}</span><span class="s2">/recorded_files.json&quot;</span>
<span class="w">  </span>/usr/bin/curl<span class="w"> </span>-s<span class="w">  </span>--header<span class="w"> </span><span class="s1">&#39;Accept: */*&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">           </span>--header<span class="w"> </span><span class="s1">&#39;Accept-Encoding: gzip, deflate&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">           </span>--header<span class="w"> </span><span class="s1">&#39;Accept-Language: en-US,en;q=0.5&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">           </span>--header<span class="w"> </span><span class="s1">&#39;Cache-Control: no-cache&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">           </span>--header<span class="w"> </span><span class="s1">&#39;Connection: keep-alive&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">           </span>--header<span class="w"> </span><span class="s1">&#39;Host: ${IP}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">           </span>--header<span class="w"> </span><span class="s1">&#39;Pragma: no-cache&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">           </span>--header<span class="w"> </span><span class="s1">&#39;Referer: http://${IP}/recorded_files.html?SeriesID=&quot;${SeriesID[$iSeriesID]}&quot;&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">           </span>--header<span class="w"> </span><span class="s1">&#39;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>http://<span class="si">${</span><span class="nv">IP</span><span class="si">}</span>/recorded_files.json?SeriesID<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SeriesID</span><span class="p">[</span><span class="nv">$iSeriesID</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>recorded_files.json<span class="w"> </span><span class="m">2</span>&gt;&gt;hdhomerun.log
<span class="w">    </span><span class="c1">#            ^                   ^           ^</span>
<span class="w">  </span><span class="c1">#-------------------------------------------------</span>
<span class="w">  </span><span class="c1"># Get all PlayURL recordings for this SeriesID</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span><span class="nb">unset</span><span class="w"> </span>PlayURL
<span class="w">  </span><span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>PlayURL
<span class="w">  </span><span class="nv">PlayURL</span><span class="o">=(</span><span class="k">$(</span>/usr/bin/jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.[] | .PlayURL&#39;</span><span class="w"> </span>recorded_files.json<span class="k">)</span><span class="o">)</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">iPlayURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>iPlayURL<span class="w"> </span>&lt;<span class="w"> </span><span class="si">${#</span><span class="nv">PlayURL</span><span class="p">[@]</span><span class="si">}</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>iPlayURL++<span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span>logit<span class="w"> </span><span class="s2">&quot;PlayURL [</span><span class="nv">$iPlayURL</span><span class="s2">]: </span><span class="si">${</span><span class="nv">PlayURL</span><span class="p">[</span><span class="nv">$iPlayURL</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">done</span>

<span class="w">  </span><span class="c1">#-------------------------------------------------</span>
<span class="w">  </span><span class="c1"># Get all Filename recordings for this SeriesID</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span><span class="nb">unset</span><span class="w"> </span>Filename
<span class="w">  </span><span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span>Filename
<span class="w">  </span>/usr/bin/jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.[] | .Filename&#39;</span><span class="w"> </span>recorded_files.json<span class="w"> </span>&gt;<span class="w"> </span>recorded_files.title
<span class="w">  </span><span class="nb">let</span><span class="w"> </span><span class="nv">iFilename</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="nb">read</span><span class="w"> </span>f
<span class="w">  </span><span class="k">do</span>

<span class="w">    </span><span class="c1"># Add new element at the end of the array</span>
<span class="w">    </span><span class="nv">Filename</span><span class="o">+=(</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">f</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Filename</span><span class="p">[</span><span class="nv">$iFilename</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="c1"># New file, download it</span>
<span class="w">      </span>logit<span class="w"> </span><span class="s2">&quot;Downloading Filename [</span><span class="nv">$iFilename</span><span class="s2">]: </span><span class="si">${</span><span class="nv">Filename</span><span class="p">[</span><span class="nv">$iFilename</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">      </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;HDHomeRun recording: Downloading Filename [</span><span class="nv">$iFilename</span><span class="s2">]: </span><span class="si">${</span><span class="nv">Filename</span><span class="p">[</span><span class="nv">$iFilename</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">${</span><span class="nv">PlayURL</span><span class="p">[</span><span class="nv">$iFilename</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>bob@example.com<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">$(/bin/date)</span>
<span class="s">EOF</span>
<span class="w">      </span><span class="c1">#-------------------------------------------------</span>
<span class="w">      </span><span class="c1"># Download Recording</span>
<span class="w">      </span><span class="c1">#</span>
<span class="w">      </span><span class="nv">REAL_URL</span><span class="o">=</span><span class="k">$(</span><span class="nb">eval</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">PlayURL</span><span class="p">[</span><span class="nv">$iFilename</span><span class="p">]</span><span class="si">}</span><span class="k">)</span>
<span class="w">      </span>logit<span class="w"> </span><span class="s2">&quot;RealURL: </span><span class="si">${</span><span class="nv">REAL_URL</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">      </span>/usr/bin/curl<span class="w">   </span>--header<span class="w"> </span><span class="s1">&#39;Accept: */*&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">             </span>--header<span class="w"> </span><span class="s1">&#39;Accept-Encoding: gzip, deflate&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">             </span>--header<span class="w"> </span><span class="s1">&#39;Accept-Language: en-US,en;q=0.5&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">             </span>--header<span class="w"> </span><span class="s1">&#39;Cache-Control: no-cache&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">             </span>--header<span class="w"> </span><span class="s1">&#39;Connection: keep-alive&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">             </span>--header<span class="w"> </span><span class="s1">&#39;Host: ${IP}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">             </span>--header<span class="w"> </span><span class="s1">&#39;Pragma: no-cache&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">             </span>--header<span class="w"> </span><span class="s1">&#39;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">REAL_URL</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">Filename</span><span class="p">[</span><span class="nv">$iFilename</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span>&gt;&gt;hdhomerun.log
<span class="w">      </span><span class="c1"># ^                         ^</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span><span class="c1"># </span>
<span class="w">    </span><span class="nb">let</span><span class="w"> </span>iFilename++
<span class="w">  </span><span class="k">done</span><span class="w"> </span>&lt;<span class="w"> </span>recorded_files.title

<span class="w">  </span>rm<span class="w"> </span>recorded_files.title

<span class="w">  </span><span class="c1"># Back to main directory</span>
<span class="w">  </span><span class="nb">cd</span><span class="w"> </span>..
<span class="k">done</span>
</code></pre></div>

<h2 id="curseradio">curseradio</h2>
<p>Python project to listen to streaming internet radio from command line</p>
<p>Favourites File:</p>
<p>~/.local/share/curseradio/favourites.opml</p>
<p>File: ~/radio.sh</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#sudo apt-get install curseradio</span>
<span class="c1">#git clone https://github.com/chronitis/curseradio/</span>
<span class="c1">## cd</span>
<span class="nb">cd</span><span class="w"> </span>curseradio
<span class="c1">## create venv</span>
<span class="c1">#python3 -m venv env</span>
<span class="c1">## activate vene</span>
<span class="nb">source</span><span class="w"> </span>env/bin/activate
<span class="c1">## install required libraries via requirements.txt file</span>
<span class="c1"># cat requirements.txt </span>
<span class="c1">#lxml</span>
<span class="c1">#requests</span>
<span class="c1">#pyxdg</span>
<span class="c1">## pip install</span>
<span class="c1">#pip install -r requirements.txt</span>
<span class="c1">## setup.py</span>
<span class="c1"># pip install -e .</span>
<span class="c1">##Obtaining file:///media/bob/data/curseradio</span>
<span class="c1">##Installing collected packages: curseradio</span>
<span class="c1">##  Running setup.py develop for curseradio</span>
<span class="c1">##Successfully installed curseradio</span>
<span class="c1">##</span>
<span class="c1">## Run it!</span>
curseradio
<span class="c1">## Get out of virtual environment</span>
deactivate
</code></pre></div>

<h3 id="curseradio-configuration-file">curseradio configuration file</h3>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nx">outline</span><span class="w"> </span><span class="k">type</span><span class="p">=</span><span class="s">&quot;audio&quot;</span><span class="w"> </span><span class="nx">text</span><span class="p">=</span><span class="s">&quot;Handcrafted Radio (US)&quot;</span><span class="w"> </span><span class="nx">URL</span><span class="p">=</span><span class="s">&quot;</span>
<span class="s">http://opml.radiotime.com/Tune.ashx?id=s97491&quot;</span><span class="w"> </span><span class="nx">bitrate</span><span class="p">=</span><span class="s">&quot;128&quot;</span>
<span class="nx">reliability</span><span class="p">=</span><span class="s">&quot;98&quot;</span><span class="w"> </span><span class="nx">guide_id</span><span class="p">=</span><span class="s">&quot;s97491&quot;</span><span class="w"> </span><span class="nx">subtext</span><span class="p">=</span><span class="s">&quot;Jackson Browne - Doctor My</span>
<span class="s">Eyes&quot;</span><span class="w"> </span><span class="nx">genre_id</span><span class="p">=</span><span class="s">&quot;g54&quot;</span><span class="w"> </span><span class="nx">formats</span><span class="p">=</span><span class="s">&quot;mp3&quot;</span><span class="w"> </span><span class="nx">playing</span><span class="p">=</span><span class="s">&quot;Jackson Browne - Doctor My</span>
<span class="s">Eyes&quot;</span><span class="w"> </span><span class="nx">playing_image</span><span class="p">=</span><span class="s">&quot;http://cdn-albums.tunein.com/gn/WJRG9NQZCHq.jpg&quot;</span>
<span class="nx">item</span><span class="p">=</span><span class="s">&quot;station&quot;</span><span class="w"> </span><span class="nx">image</span><span class="p">=</span><span class="s">&quot;http://cdn-radiotime-logos.tunein.com/s97491q.png</span>
<span class="s">&quot;</span><span class="w"> </span><span class="nx">now_playing_id</span><span class="p">=</span><span class="s">&quot;s97491&quot;</span><span class="w"> </span><span class="nx">preset_id</span><span class="p">=</span><span class="s">&quot;s97491&quot;</span><span class="o">/</span><span class="p">&gt;</span>
<span class="o">...</span>
<span class="nx">from</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="nx">local</span><span class="o">/</span><span class="nx">share</span><span class="o">/</span><span class="nx">curseradio</span><span class="o">/</span><span class="nx">favourites</span><span class="p">.</span><span class="nx">opml</span>
</code></pre></div>

<h1 id="conclusion">Conclusion</h1>
<p>Now that you have sensed the sights and sounds of Video and Audio controlled and maintained by your computer, I wish to thank you for your interest in this book..</p>
<p>Hopefully this little write up was of some help.</p>
<p>Regards,<br>
-- Don</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://lwn.net/">Linux Weekly News</a></li>
                            <li><a href="https://fullcirclemagazine.org/">Full Circle Magazine</a></li>
                            <li><a href="https://www.linuxjournal.com/">Linux Journal</a></li>
                            <li><a href="https://www.linux-magazine.com/">Linux Magazine</a></li>
                            <li><a href="https://www.thefarside.com/">The Far Side</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://dfcsoftware.github.io/linux-in-house/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://fosstodon.org/@LinuxintheHouse">Feedback</a></li>
                            <li><a href="https://fosstodon.org/@LinuxintheHouse.rss">Mastodon RSS feed</a></li>
                            <li><a href="https://linux-in-the-house.pages.dev/">Book</a></li>
                            <li><a href="/linux-in-house/author/don-cohoon.html">Created by: Don Cohoon</a></li>
                            <li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License </a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>
                Site by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, via <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </p><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                <p> Version:  3.79 </p>
        </footer><!-- /#contentinfo -->

</body>
</html>