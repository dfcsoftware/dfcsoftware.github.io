<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
	<meta charset="utf-8"/>
	<title>MediaManagement</title>
	<meta name="date" content="2023-01-25 10:34"/>
	<meta name="modified" content="2024-04-19 9:30"/>
	<meta name="tags" content="systems"/>
	<meta name="author" content="Don Cohoon"/>
	<meta name="summary" content="This is where I manage Music and Television files."/>
	<meta name="license" content="'[CC-BY-NC-SA 4.0](http://creativecommons.org/licenses/by-nc-sa/4.0/)'"/>
<meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" href="/linux-in-house/common.css" type="text/css" />
</head>
<body>

<p><a href="/linux-in-house/"><h1>Linux in House</h1></a></p>

<link href="/linux-in-house/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/linux-in-house/pagefind/pagefind-ui.js"></script>

<div id="search"></div>
<script>
window.addEventListener('DOMContentLoaded', (event) => {
      new PagefindUI({ element: "#search", showSubResults: true });
});
</script>

<blockquote>
<p><a href="/linux-in-house/linux/welcome.html">Welcome Back My Friends</a></p>
</blockquote>

<h1 id="mediamanagementaudiovideo">Media Management (audio/video)</h1>

<p>This is where I manage Music and Television files.</p>

<br/>

<hr />

<div class="TOC">

<ul>
<li><a href="#mediamanagementaudiovideo">Media Management (audio/video)</a>
<ul>
<li><a href="#musicplayerdaemon">Music Player Daemon</a>
<ul>
<li><a href="#mpdconfiguration">MPD Configuration</a></li>
<li><a href="#mpddaemonprocesses">MPD Daemon Processes</a>
<ul>
<li><a href="#linux">Linux</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#audioplayer">Audio Player</a></li>
<li><a href="#plextelevisionandmusicrecordings">Plex Television and Music Recordings</a></li>
<li><a href="#over-the-airotahdhomeruntelevisionrecording">Over-the-Air (OTA) HDHomeRun Television Recording</a>
<ul>
<li><a href="#copytvrecordings">Copy TV Recordings</a></li>
</ul>
</li>
<li><a href="#curseradio">curseradio</a>
<ul>
<li><a href="#curseradioconfigurationfile">curseradio configuration file</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a>
<ul>
<li><a href="#madeforhumansbyahuman">Made for Humans, by a Human</a></li>
<li><a href="#links">Links</a></li>
<li><a href="#social">Social</a></li>
</ul>
</li>
</ul>
</div>

<hr />

<h2 id="musicplayerdaemon">Music Player Daemon</h2>

<p>Hardware:</p>

<ul>
<li>BeagleBone AI-32 with Debian Linux</li>
<li>TrueNAS container</li>
</ul>

<p>Software:</p>

<ul>
<li>Linux: mpd (server), and mpc, <a href="/linux-in-house/ncmpcpp.html">ncmpcpp</a> (clients)</li>
</ul>

<pre><code>$ sudo apt-get install mpd mpc
</code></pre>

<ul>
<li>iOS: MaximumMPD (client for iPhone, iPad)</li>
</ul>

<figure>
<img src="/linux-in-house/images/IMG_60BE35F3E1C0-1%20%282%29.jpeg" alt="IMG_60BE35F3E1C0-1.jpeg" />
<figcaption>IMG_60BE35F3E1C0&#8211;1.jpeg</figcaption>
</figure>

<h3 id="mpdconfiguration">MPD Configuration</h3>

<p>File: /etc/mpd.conf</p>

<pre><code># An example configuration file for MPD.
# Read the user manual for documentation: http://www.musicpd.org/doc/user/
# or /usr/share/doc/mpd/html/user.html


# Files and directories #######################################################
#
# This setting controls the top directory which MPD will search to discover the
# available audio files and add them to the daemon's online database. This
# setting defaults to the XDG directory, otherwise the music directory will be
# be disabled and audio files will only be accepted over ipc socket (using
# file:// protocol) or streaming files over an accepted protocol.
#
music_directory		&quot;/data/bob/music/Music&quot;
#
# This setting sets the MPD internal playlist directory. The purpose of this
# directory is storage for playlists created by MPD. The server will use
# playlist files not created by the server but only if they are in the MPD
# format. This setting defaults to playlist saving being disabled.
#
playlist_directory		&quot;/data/bob/music/mpd/playlists&quot;
#
# This setting sets the location of the MPD database. This file is used to
# load the database at server start up and store the database while the
# server is not up. This setting defaults to disabled which will allow
# MPD to accept files over ipc socket (using file:// protocol) or streaming
# files over an accepted protocol.
#
db_file			&quot;/data/bob/music/mpd/tag_cache&quot;
#
# These settings are the locations for the daemon log files for the daemon.
# These logs are great for troubleshooting, depending on your log_level
# settings.
#
# The special value &quot;syslog&quot; makes MPD use the local syslog daemon. This
# setting defaults to logging to syslog, or to journal if mpd was started as
# a systemd service.
#
log_file			&quot;/var/log/mpd/mpd.log&quot;
#
# This setting sets the location of the file which stores the process ID
# for use of mpd --kill and some init scripts. This setting is disabled by
# default and the pid file will not be stored.
#
pid_file			&quot;/run/mpd/pid&quot;
#
# This setting sets the location of the file which contains information about
# most variables to get MPD back into the same general shape it was in before
# it was brought down. This setting is disabled by default and the server
# state will be reset on server start up.
#
state_file			&quot;/data/bob/music/mpd/state&quot;
#
# The location of the sticker database.  This is a database which
# manages dynamic information attached to songs.
#
sticker_file                   &quot;/data/bob/music/mpd/sticker.sql&quot;
#
###############################################################################


# General music daemon options ################################################
#
# This setting specifies the user that MPD will run as. MPD should never run as
# root and you may use this setting to make MPD change its user ID after
# initialization. This setting is disabled by default and MPD is run as the
# current user.
#
user				&quot;mpd&quot;
#
# This setting specifies the group that MPD will run as. If not specified
# primary group of user specified with &quot;user&quot; setting will be used (if set).
# This is useful if MPD needs to be a member of group such as &quot;audio&quot; to
# have permission to use sound card.
#
#group                          &quot;nogroup&quot;
#
# This setting sets the address for the daemon to listen on. Careful attention
# should be paid if this is assigned to anything other then the default, any.
# This setting can deny access to control of the daemon. Choose any if you want
# to have mpd listen on every address. Not effective if systemd socket
# activation is in use.
#
# For network
#bind_to_address		&quot;localhost&quot;
bind_to_address		&quot;0.0.0.0&quot;
#
# And for Unix Socket
#bind_to_address		&quot;/run/mpd/socket&quot;
#
# This setting is the TCP port that is desired for the daemon to get assigned
# to.
#
port				&quot;6600&quot;
#
# This setting controls the type of information which is logged. Available
# setting arguments are &quot;default&quot;, &quot;secure&quot; or &quot;verbose&quot;. The &quot;verbose&quot; setting
# argument is recommended for troubleshooting, though can quickly stretch
# available resources on limited hardware storage.
#
#log_level			&quot;default&quot;
#
# Setting &quot;restore_paused&quot; to &quot;yes&quot; puts MPD into pause mode instead
# of starting playback after startup.
#
#restore_paused &quot;no&quot;
#
# This setting enables MPD to create playlists in a format usable by other
# music players.
#
#save_absolute_paths_in_playlists	&quot;no&quot;
#
# This setting defines a list of tag types that will be extracted during the
# audio file discovery process. The complete list of possible values can be
# found in the user manual.
#metadata_to_use	&quot;artist,album,title,track,name,genre,date,composer,performer,disc&quot;
#
# This example just enables the &quot;comment&quot; tag without disabling all
# the other supported tags:
#metadata_to_use &quot;+comment&quot;
#
# This setting enables automatic update of MPD's database when files in
# music_directory are changed.
#
#auto_update    &quot;yes&quot;
#
# Limit the depth of the directories being watched, 0 means only watch
# the music directory itself.  There is no limit by default.
#
#auto_update_depth &quot;3&quot;
#
###############################################################################


# Symbolic link behavior ######################################################
#
# If this setting is set to &quot;yes&quot;, MPD will discover audio files by following
# symbolic links outside of the configured music_directory.
#
#follow_outside_symlinks	&quot;yes&quot;
#
# If this setting is set to &quot;yes&quot;, MPD will discover audio files by following
# symbolic links inside of the configured music_directory.
#
#follow_inside_symlinks		&quot;yes&quot;
#
###############################################################################


# Zeroconf / Avahi Service Discovery ##########################################
#
# If this setting is set to &quot;yes&quot;, service information will be published with
# Zeroconf / Avahi.
#
#zeroconf_enabled		&quot;yes&quot;
#
# The argument to this setting will be the Zeroconf / Avahi unique name for
# this MPD server on the network. %h will be replaced with the hostname.
#
#zeroconf_name			&quot;Music Player @ %h&quot;
#
###############################################################################


# Permissions #################################################################
#
# If this setting is set, MPD will require password authorization. The password
# setting can be specified multiple times for different password profiles.
#
#password                        &quot;password@read,add,control,admin&quot;
#
# This setting specifies the permissions a user has who has not yet logged in.
#
#default_permissions             &quot;read,add,control,admin&quot;
#
###############################################################################


# Database #######################################################################
#

#database {
#       plugin &quot;proxy&quot;
#       host &quot;other.mpd.host&quot;
#       port &quot;6600&quot;
#}

# Input #######################################################################
#

input {
        plugin &quot;curl&quot;
#       proxy &quot;proxy.isp.com:8080&quot;
#       proxy_user &quot;user&quot;
#       proxy_password &quot;password&quot;
}

# QOBUZ input plugin
input {
        enabled    &quot;no&quot;
        plugin     &quot;qobuz&quot;
#        app_id     &quot;ID&quot;
#        app_secret &quot;SECRET&quot;
#        username   &quot;USERNAME&quot;
#        password   &quot;PASSWORD&quot;
#        format_id  &quot;N&quot;
}

# TIDAL input plugin
input {
        enabled      &quot;no&quot;
        plugin       &quot;tidal&quot;
#        token        &quot;TOKEN&quot;
#        username     &quot;USERNAME&quot;
#        password     &quot;PASSWORD&quot;
#        audioquality &quot;Q&quot;
}

# Decoder #####################################################################
#

decoder {
        plugin                  &quot;hybrid_dsd&quot;
        enabled                 &quot;no&quot;
#       gapless                 &quot;no&quot;
}

#
###############################################################################

# Audio Output ################################################################
#
# MPD supports various audio output types, as well as playing through multiple
# audio outputs at the same time, through multiple audio_output settings
# blocks. Setting this block is optional, though the server will only attempt
# autodetection for one sound card.
#
# An example of an ALSA output:
#
audio_output {
	type		&quot;alsa&quot;
	name		&quot;Sabrent ALSA Device&quot;
	device		&quot;hw:1&quot;	# optional
#	device		&quot;hw:0,0&quot;	# optional
#	mixer_type      &quot;hardware&quot;      # optional
#	mixer_device	&quot;default&quot;	# optional
#	mixer_control	&quot;PCM&quot;		# optional
#	mixer_index	&quot;0&quot;		# optional
}
#
# Bluetooth through pulesaudio
#audio_output {
#  type “pulse”
#  name “FOSI Audio”
#  mixer_type “none”
#  sink “bluez_sink.7C:58:CA:00:19:63.a2dp_sink”
#}
#
# An example of an OSS output:
#
#audio_output {
#	type		&quot;oss&quot;
#	name		&quot;My OSS Device&quot;
#	device		&quot;/dev/dsp&quot;	# optional
#	mixer_type      &quot;hardware&quot;      # optional
#	mixer_device	&quot;/dev/mixer&quot;	# optional
#	mixer_control	&quot;PCM&quot;		# optional
#}
#
# An example of a shout output (for streaming to Icecast):
#
#audio_output {
#	type		&quot;shout&quot;
#	encoder		&quot;vorbis&quot;		# optional
#	name		&quot;My Shout Stream&quot;
#	host		&quot;localhost&quot;
#	port		&quot;8000&quot;
#	mount		&quot;/mpd.ogg&quot;
#	password	&quot;hackme&quot;
#	quality		&quot;5.0&quot;
#	bitrate		&quot;128&quot;
#	format		&quot;44100:16:1&quot;
#	protocol	&quot;icecast2&quot;		# optional
#	user		&quot;source&quot;		# optional
#	description	&quot;My Stream Description&quot;	# optional
#	url             &quot;http://example.com&quot;    # optional
#	genre		&quot;jazz&quot;			# optional
#	public		&quot;no&quot;			# optional
#	timeout		&quot;2&quot;			# optional
#	mixer_type      &quot;software&quot;              # optional
#}
#
# An example of a recorder output:
#
#audio_output {
#       type            &quot;recorder&quot;
#       name            &quot;My recorder&quot;
#       encoder         &quot;vorbis&quot;                # optional, vorbis or lame
#       path            &quot;/var/lib/mpd/recorder/mpd.ogg&quot;
##      quality         &quot;5.0&quot;                   # do not define if bitrate is defined
#       bitrate         &quot;128&quot;                   # do not define if quality is defined
#       format          &quot;44100:16:1&quot;
#}
#
# An example of a httpd output (built-in HTTP streaming server):
#
audio_output {
	type		&quot;httpd&quot;
	name		&quot;My HTTP Stream&quot;
	encoder		&quot;vorbis&quot;		# optional, vorbis or lame
	port		&quot;8888&quot;
	bind_to_address &quot;0.0.0.0&quot;               # optional, IPv4 or IPv6
	#quality		&quot;5.0&quot;			# do not define if bitrate is defined
	bitrate		&quot;128&quot;			# do not define if quality is defined
	format		&quot;44100:16:1&quot;
	max_clients     &quot;2&quot;                     # optional 0=no limit
}
#
# An example of a pulseaudio output (streaming to a remote pulseaudio server)
# Please see README.Debian if you want mpd to play through the pulseaudio
# daemon started as part of your graphical desktop session!
#
#audio_output {
#	type		&quot;pulse&quot;
#	name		&quot;My Pulse Output&quot;
#	server		&quot;remote_server&quot;		# optional
#	sink		&quot;remote_server_sink&quot;	# optional
#}
#
# An example of a winmm output (Windows multimedia API).
#
#audio_output {
#	type		&quot;winmm&quot;
#	name		&quot;My WinMM output&quot;
#	device		&quot;Digital Audio (S/PDIF) (High Definition Audio Device)&quot; # optional
#		or
#	device		&quot;0&quot;		# optional
#	mixer_type	&quot;hardware&quot;	# optional
#}
#
# An example of an openal output.
#
#audio_output {
#	type		&quot;openal&quot;
#	name		&quot;My OpenAL output&quot;
#	device		&quot;Digital Audio (S/PDIF) (High Definition Audio Device)&quot; # optional
#}
#
## Example &quot;pipe&quot; output:
#
#audio_output {
#	type		&quot;pipe&quot;
#	name		&quot;my pipe&quot;
#	command		&quot;aplay -f cd 2&gt;/dev/null&quot;
## Or if you're want to use AudioCompress
#	command		&quot;AudioCompress -m | aplay -f cd 2&gt;/dev/null&quot;
## Or to send raw PCM stream through PCM:
#	command		&quot;nc example.org 8765&quot;
#	format		&quot;44100:16:2&quot;
#}
#
## An example of a null output (for no audio output):
#
#audio_output {
#	type		&quot;null&quot;
#	name		&quot;My Null Output&quot;
#	mixer_type      &quot;none&quot;                  # optional
#}
#
###############################################################################


# Normalization automatic volume adjustments ##################################
#
# This setting specifies the type of ReplayGain to use. This setting can have
# the argument &quot;off&quot;, &quot;album&quot;, &quot;track&quot; or &quot;auto&quot;. &quot;auto&quot; is a special mode that
# chooses between &quot;track&quot; and &quot;album&quot; depending on the current state of
# random playback. If random playback is enabled then &quot;track&quot; mode is used.
# See &lt;http://www.replaygain.org&gt; for more details about ReplayGain.
# This setting is off by default.
#
#replaygain			&quot;album&quot;
#
# This setting sets the pre-amp used for files that have ReplayGain tags. By
# default this setting is disabled.
#
#replaygain_preamp		&quot;0&quot;
#
# This setting sets the pre-amp used for files that do NOT have ReplayGain tags.
# By default this setting is disabled.
#
#replaygain_missing_preamp	&quot;0&quot;
#
# This setting enables or disables ReplayGain limiting.
# MPD calculates actual amplification based on the ReplayGain tags
# and replaygain_preamp / replaygain_missing_preamp setting.
# If replaygain_limit is enabled MPD will never amplify audio signal
# above its original level. If replaygain_limit is disabled such amplification
# might occur. By default this setting is enabled.
#
#replaygain_limit		&quot;yes&quot;
#
# This setting enables on-the-fly normalization volume adjustment. This will
# result in the volume of all playing audio to be adjusted so the output has
# equal &quot;loudness&quot;. This setting is disabled by default.
#
#volume_normalization		&quot;no&quot;
#
###############################################################################

# Character Encoding ##########################################################
#
# If file or directory names do not display correctly for your locale then you
# may need to modify this setting.
#
filesystem_charset		&quot;UTF-8&quot;
#
###############################################################################
</code></pre>

<h3 id="mpddaemonprocesses">MPD Daemon Processes</h3>

<p>These configurations keep the mpd daemon running after boot and restarted upon any failure.</p>

<h4 id="linux">Linux</h4>

<p>FIle: /lib/systemd/system/mpd.service</p>

<pre><code>[Unit]
Description=Music Player Daemon
Documentation=man:mpd(1) man:mpd.conf(5)
Documentation=file:///usr/share/doc/mpd/user-manual.html
After=network.target sound.target

[Service]
Type=notify
EnvironmentFile=/etc/default/mpd
ExecStart=/usr/bin/mpd --no-daemon $MPDCONF

# Enable this setting to ask systemd to watch over MPD, see
# systemd.service(5).  This is disabled by default because it causes
# periodic wakeups which are unnecessary if MPD is not playing.
#WatchdogSec=120

# allow MPD to use real-time priority 50
LimitRTPRIO=50
LimitRTTIME=infinity

# disallow writing to /usr, /bin, /sbin, ...
ProtectSystem=yes

# more paranoid security settings
NoNewPrivileges=yes
ProtectKernelTunables=yes
ProtectControlGroups=yes
ProtectKernelModules=yes
# AF_NETLINK is required by libsmbclient, or it will exit() .. *sigh*
RestrictAddressFamilies=AF_INET AF_INET6 AF_UNIX AF_NETLINK
RestrictNamespaces=yes

[Install]
WantedBy=multi-user.target
Also=mpd.socket
</code></pre>

<h2 id="audioplayer">Audio Player</h2>

<p>Hardware:</p>

<ul>
<li>host (BeagleBone AI-64 Debian Linux).</li>
</ul>

<p>Software:</p>

<ul>
<li>Linux: NextCloud app called <strong>audioplayer</strong>, visible on NextCloud web interface</li>
</ul>

<p>The music files reside in the /Music directory of the nextcloud account.</p>

<figure>
<img src="/linux-in-house/images/Audio-Player.png" alt="Audio-Player.png" />
<figcaption>Audio-Player.png</figcaption>
</figure>

<p>Reference: <a href="https://apps.nextcloud.com/apps/audioplayer">https://apps.nextcloud.com/apps/audioplayer</a></p>

<h2 id="plextelevisionandmusicrecordings">Plex Television and Music Recordings</h2>

<p>This is where most TV shows are played from, on either one of the Apple-TVs.</p>

<p>Hardware:</p>

<ul>
<li>TrueNAS Scale container</li>
</ul>

<p>Software:</p>

<ul>
<li>Debian: Plex Media Server app, Web Interface <a href="http://127.0.0.1:32400/web/index.html#!/">http://127.0.0.1:32400/web/index.html#!/</a></li>
<li>iOS: Plexamp (Music) on the Phone or Tablet</li>
</ul>

<figure>
<img src="/linux-in-house/images/IMG_233B4FCE41DA-1.jpeg" alt="IMG_233B4FCE41DA-1.jpeg" />
<figcaption>IMG_233B4FCE41DA-1.jpeg</figcaption>
</figure>

<ul>
<li>tvOS: Plex (Video, Music) on the Apple-TV</li>
</ul>

<p>Libraries:</p>

<ul>
<li>TV: /tv_share/tv (Recordings come from OTA HDHomeRun below)</li>
<li>Movies: ~/tv_share/movies</li>
<li>Music: ~/nextcloud/Music</li>
</ul>

<p>Reference: <a href="https://www.plex.tv/media-server-downloads/">https://www.plex.tv/media-server-downloads/</a></p>

<h2 id="over-the-airotahdhomeruntelevisionrecording">Over-the-Air (OTA) HDHomeRun Television Recording</h2>

<p>Hardware:</p>

<ul>
<li>host HDHomeRun (Silicondust Engineering Flex-4; <a href="https://www.silicondust.com/product/hdhomerun-flex-4k/">https://www.silicondust.com/product/hdhomerun-flex-4k/</a>) with 2TB USB SSD locally attached.</li>
</ul>

<p>Software:</p>

<ul>
<li>Built-in webservice on port 80 (<a href="http://hdhomerun.local/">http://hdhomerun.local/</a>)</li>
<li>iOS: HDHomeRun (Used to set recordings and delete old shows on the HDHomeRun box)</li>
</ul>

<figure>
<img src="/linux-in-house/images/IMG_5456720E92DB-1.jpeg" alt="IMG_5456720E92DB-1.jpeg" />
<figcaption>IMG_5456720E92DB-1.jpeg</figcaption>
</figure>

<ul>
<li>Application Programming Interface (API): <a href="https://info.hdhomerun.com/info/http_api">https://info.hdhomerun.com/info/http_api</a></li>
</ul>

<h3 id="copytvrecordings">Copy TV Recordings</h3>

<p>The actual recording from OTA happens on the HDHomeRun box, and I copy the recordings into a Plex library using the HDHomeRun web interface. This is scheduled once a day in cron.</p>

<p>File: ~/tv_share/tv/hdhomerun/get.sh</p>

<pre><code>#!/bin/bash
#-------------------------------------------------
# File get.sh
# Usage: get.sh
#   Set the IP address of the HDHomeRun Flex box
#    with DVR USB disk attached
#
# Purpose: Copy recordings to the shared filesystem 
#   so they can be played by other software,
#   i.e.: Plex, Infuse, VLC, etc...
#
# Dependencies: 
#  -apt install jq. 
#  -curl is installed by normal OS. 
#  -silicondust.com DVR subscription
#   required to record on the device, $35 annual
#   hdhomerun_config also from silicondust.com
#
# History:
#  Date        Author      Description
# -----------  ----------  -----------------------
# 22-Jul-2021  Don Cohoon  Created on MacOS
# 20-Jan-2023  Don Cohoon  Added REAL_URL because
#  firmware release kept ${IP} as file name causing
#   of zero byte files
#-------------------------------------------------
MYHOME=&quot;/mnt/vol032&quot;
MYDIR=&quot;tv_share/tv&quot;
MYTESTFILE=${MYHOME}/tv_share/get.sh
export PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
#-------------------------------------------------
# Log
function logit()
{
  echo $@
  echo ${0} $(/bin/date) : $@ &gt;&gt;hdhomerun.log 2&gt;&amp;1
}

#-------------------------------------------------
# Ensure we move to correct directory
#
cd ${MYHOME}/${MYDIR}
if [ ! -f ${MYTESTFILE} ]; then
  logit &quot;=&gt; Cannot change to ${MYHOME}/${MYDIR}&quot;
  exit 2
fi

#-------------------------------------------------
# Get IP address of TV Server
#
IP=$(/usr/local/bin/hdhomerun_config discover|awk '{print $6}')
logit &quot;=&gt; IP address of TV server is ${IP}&quot;

#-------------------------------------------------
# Get Record engine status 
#
logit &quot;=&gt; discover.json&quot;
/usr/bin/curl -s http://${IP}/discover.json &gt;discover.json 2&gt;&gt;hdhomerun.log
#                             ^
#cat discover.json
#logit 
#logit &quot;. . .&quot;

#-------------------------------------------------
# Get recorded_files.json from root of dvr
#
logit &quot;=&gt; recorded_files.json&quot;
/usr/bin/curl -s  --header 'Accept: */*' \
         --header 'Accept-Encoding: gzip, deflate' \
         --header 'Accept-Language: en-US,en;q=0.5' \
         --header 'Cache-Control: no-cache' \
         --header 'Connection: keep-alive' \
         --header 'Pragma: no cache' \
         --header &quot;Host: ${IP}&quot; \
         --header &quot;Referer: http://${IP}/recorded_files.html&quot; \
         --header 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0' \
  http://${IP}/recorded_files.json?DisplayGroupID=root &gt; recorded_files.json 2&gt;&gt;hdhomerun.log
  #            ^                   ^              ^ 
#cat recorded_files.json 
#logit 
#logit &quot;. . .&quot;

#-------------------------------------------------
# Get root SeriesIDs from recorded_files.json
#
declare -a SeriesID
SeriesID=($(/usr/bin/jq -r '.[] | .SeriesID' recorded_files.json))
#for (( i = 0 ; i &lt; ${#SeriesID[@]} ; i++))
#do
#  logit &quot;Series [$i]: ${SeriesID[$i]}&quot;
#done

#-------------------------------------------------
# Get root Titles from recorded_files.json
#
declare -a Title
/usr/bin/jq -r '.[] | .Title' recorded_files.json &gt; recorded_files.title
let i=0
while read t
do
  # Add new element at the end of the array
  Title+=(&quot;${t}&quot;)
  logit &quot;Title [$i]: ${Title[$i]}&quot;
  let i++
done &lt; recorded_files.title
rm recorded_files.title
#

#-------------------------------------------------
# Get SeriesID recordings, into &quot;Title&quot;/recorded_files.json
#
for (( iSeriesID = 0 ; iSeriesID &lt; ${#SeriesID[@]} ; iSeriesID++))
do
  # Put Series into Title directory
  mkdir -p &quot;${Title[$iSeriesID]}&quot;
  cd       &quot;${Title[$iSeriesID]}&quot;

  logit &quot;Downloading Series : ${Title[$iSeriesID]}/recorded_files.json&quot;
  /usr/bin/curl -s  --header 'Accept: */*' \
           --header 'Accept-Encoding: gzip, deflate' \
           --header 'Accept-Language: en-US,en;q=0.5' \
           --header 'Cache-Control: no-cache' \
           --header 'Connection: keep-alive' \
           --header 'Host: ${IP}' \
           --header 'Pragma: no-cache' \
           --header 'Referer: http://${IP}/recorded_files.html?SeriesID=&quot;${SeriesID[$iSeriesID]}&quot;' \
           --header 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0' \
    http://${IP}/recorded_files.json?SeriesID=&quot;${SeriesID[$iSeriesID]}&quot; &gt; recorded_files.json 2&gt;&gt;hdhomerun.log
    #            ^                   ^           ^
  #-------------------------------------------------
  # Get all PlayURL recordings for this SeriesID
  #
  unset PlayURL
  declare -a PlayURL
  PlayURL=($(/usr/bin/jq -r '.[] | .PlayURL' recorded_files.json))
  for (( iPlayURL = 0 ; iPlayURL &lt; ${#PlayURL[@]} ; iPlayURL++))
  do
    logit &quot;PlayURL [$iPlayURL]: ${PlayURL[$iPlayURL]}&quot;
  done

  #-------------------------------------------------
  # Get all Filename recordings for this SeriesID
  #
  unset Filename
  declare -a Filename
  /usr/bin/jq -r '.[] | .Filename' recorded_files.json &gt; recorded_files.title
  let iFilename=0
  while read f
  do

    # Add new element at the end of the array
    Filename+=(&quot;${f}&quot;)

    if [ ! -f &quot;${Filename[$iFilename]}&quot; ]; then # New file, download it
      logit &quot;Downloading Filename [$iFilename]: ${Filename[$iFilename]}&quot;
      mail -s &quot;HDHomeRun recording: Downloading Filename [$iFilename]: ${Filename[$iFilename]} - ${PlayURL[$iFilename]}&quot; bob@example.com &lt;&lt;EOF
$(/bin/date)
EOF
      #-------------------------------------------------
      # Download Recording
      #
      REAL_URL=$(eval echo ${PlayURL[$iFilename]})
      logit &quot;RealURL: ${REAL_URL}&quot;
      /usr/bin/curl   --header 'Accept: */*' \
             --header 'Accept-Encoding: gzip, deflate' \
             --header 'Accept-Language: en-US,en;q=0.5' \
             --header 'Cache-Control: no-cache' \
             --header 'Connection: keep-alive' \
             --header 'Host: ${IP}' \
             --header 'Pragma: no-cache' \
             --header 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0' \
      &quot;${REAL_URL}&quot; &gt; &quot;${Filename[$iFilename]}&quot; 2&gt;&gt;hdhomerun.log
      # ^                         ^
    fi
    # 
    let iFilename++
  done &lt; recorded_files.title

  rm recorded_files.title

  # Back to main directory
  cd ..
done
</code></pre>

<h2 id="curseradio">curseradio</h2>

<p>Python project to listen to streaming internet radio from command line</p>

<p>Favourites File:</p>

<p>~/.local/share/curseradio/favourites.opml</p>

<p>File: ~/radio.sh</p>

<pre><code>#!/bin/bash
#sudo apt-get install curseradio
#git clone https://github.com/chronitis/curseradio/
## cd
cd curseradio
## create venv
#python3 -m venv env
## activate vene
source env/bin/activate
## install required libraries via requirements.txt file
# cat requirements.txt 
#lxml
#requests
#pyxdg
## pip install
#pip install -r requirements.txt
## setup.py
# pip install -e .
##Obtaining file:///media/bob/data/curseradio
##Installing collected packages: curseradio
##  Running setup.py develop for curseradio
##Successfully installed curseradio
##
## Run it!
curseradio
## Get out of virtual environment
deactivate
</code></pre>

<h3 id="curseradioconfigurationfile">curseradio configuration file</h3>

<pre><code>&lt;outline type=&quot;audio&quot; text=&quot;Handcrafted Radio (US)&quot; URL=&quot;
http://opml.radiotime.com/Tune.ashx?id=s97491&quot; bitrate=&quot;128&quot;
reliability=&quot;98&quot; guide_id=&quot;s97491&quot; subtext=&quot;Jackson Browne - Doctor My
Eyes&quot; genre_id=&quot;g54&quot; formats=&quot;mp3&quot; playing=&quot;Jackson Browne - Doctor My
Eyes&quot; playing_image=&quot;http://cdn-albums.tunein.com/gn/WJRG9NQZCHq.jpg&quot;
item=&quot;station&quot; image=&quot;http://cdn-radiotime-logos.tunein.com/s97491q.png
&quot; now_playing_id=&quot;s97491&quot; preset_id=&quot;s97491&quot;/&gt;
...
from ~/.local/share/curseradio/favourites.opml
</code></pre>

<h1 id="conclusion">Conclusion</h1>

<p>Now that you have sensed the sights and sounds of Video and Audio controlled and maintained by your computer, I wish to thank you for your interest in this book..</p>

<p>Hopefully this little write up was of some help.</p>

<p>Regards,<br>
&#8211; Don</p>

<hr>

<h4 id="madeforhumansbyahuman">Made for Humans, by a Human</h4>

<h4 id="links">Links</h4>

<ul>
<li><a href="https://lwn.net/">Linux Weekly News</a></li>
<li><a href="https://fullcirclemagazine.org/">Full Circle Magazine</a></li>
<li><a href="https://www.linuxjournal.com/">Linux Journal</a></li>
<li><a href="https://www.linux-magazine.com/">Linux Magazine</a></li>
<li><a href="https://www.thefarside.com/">The Far Side</a></li>
</ul>

<h4 id="social">Social</h4>

<ul>
<li><a href="https://fosstodon.org/@Cohoon">Feedback</a></li>
<li><a href="/linux-in-house/feed-linux.rss">Linux RSS Feed</a></li>
<li><a href="/linux-in-house/feed-writing.rss">Writing RSS Feed</a></li>
<li><a href="https://linux-in-the-house.pages.dev/">Book</a></li>
</ul>

<div style="overflow-x:auto;">
<table style="width: 100%;">
<tr>
     <td>
<small><a href="/linux-in-house/linux/intro.html#createdwith">Created with</a></small>
     </td>
     <td>
<small>License: <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY-NC-SA 4.0</a></<small>
     </td>
     <td>

<p><small>linux-in-house Version: 4.59 </small></p>

<p></tr>
</table></p>

</div>


</body>
</html>

