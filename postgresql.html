<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Postgresql</title>
        <link rel="stylesheet" href="https://dfcsoftware.github.io/theme/css/main.css" />
        <link href="https://dfcsoftware.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Linux Home Administration Atom Feed" />
        <meta name="description" content="Postgresql Database Postgresql relational SQL database for systems. This is a great database with high reliablity, performance and extendable...." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <table>
                    <td><h1><a href="https://dfcsoftware.github.io/">Linux Home Administration</a></h1></td>
                    <td> <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>
<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script> </td>
                </table>
                <nav><ul>
                    <li><a href="https://dfcsoftware.github.io/category/forest.html">forest</a></li>
                    <li class="active"><a href="https://dfcsoftware.github.io/category/linux.html">linux</a></li>
                    <li><a href="https://dfcsoftware.github.io/category/writing.html">writing</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://dfcsoftware.github.io/postgresql.html" rel="bookmark"
           title="Permalink to Postgresql">Postgresql</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-01-25T10:20:00-05:00">
                Published: Wed 25 January 2023
        </abbr>
		<br />
        <abbr class="modified" title="2024-04-19T09:30:00-04:00">
                Updated: Fri 19 April 2024
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://dfcsoftware.github.io/author/don-cohoon.html">Don Cohoon</a>
        </address>
<p>In <a href="https://dfcsoftware.github.io/category/linux.html">linux</a>.</p>
<p>tags: <a href="https://dfcsoftware.github.io/tag/systems.html">systems</a> <a href="https://dfcsoftware.github.io/tag/db.html">db</a> </p>
</footer><!-- /.post-info -->      <h2 id="postgresql-database">Postgresql Database</h2>
<p>Postgresql relational SQL database for systems. This is a great database with high reliablity,
performance and extendable.</p>
<p><br/></p>
<hr>
<div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#postgresql-database">Postgresql Database</a><ul>
<li><a href="#installation-version-13">Installation (version 13)</a><ul>
<li><a href="#install">Install</a></li>
<li><a href="#enable-auto-startup">Enable auto startup</a></li>
<li><a href="#check-out-all-these-options">Check out all these Options</a></li>
<li><a href="#clusters">Clusters</a></li>
<li><a href="#log-file">Log File</a></li>
<li><a href="#configuration-file">Configuration File</a></li>
<li><a href="#host-based-authentication-hba-file">Host Based Authentication (HBA) File</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#psql-pager-pspg">psql pager - pspg</a><ul>
<li><a href="#install_1">Install</a></li>
<li><a href="#helper-script">Helper Script</a></li>
<li><a href="#example">Example</a></li>
</ul>
</li>
<li><a href="#continue">Continue</a></li>
</ul>
</div>
<hr>
<p>The main features are:</p>
<ul>
<li>User Roles</li>
<li>Stored Procedures</li>
<li>JSON native support</li>
<li>Filesystem access</li>
<li>Federation with other databases</li>
<li>Physical and logical replication</li>
<li>Partitioning</li>
<li>Small system requirements</li>
</ul>
<p>Reference: <a href="https://www.postgresql.org/">https://www.postgresql.org/</a></p>
<h3 id="installation-version-13">Installation (version 13)</h3>
<p>The current version is 15, and Ubuntu 22.04 installs 14.</p>
<h4 id="install">Install</h4>
<p>This example is version 13, but it has not changed the package install command.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>postgresql<span class="w"> </span>postgresql-server
</code></pre></div>

<h4 id="enable-auto-startup">Enable auto startup</h4>
<p>Yea, still example on version 13, but should be the same on 14 and 15.</p>
<div class="highlight"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">postgresql</span><span class="mi">@13</span><span class="o">-</span><span class="n">main</span>
<span class="n">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">postgresql</span><span class="mi">@13</span><span class="o">-</span><span class="n">main</span>
</code></pre></div>

<ul>
<li>RedHat</li>
</ul>
<p>All files will be stuffed into a single directory by default (/var/lib/pgsql/data); data, config, log, etc...  </p>
<p>If you want to have multiple versions, or upgrade versions, read the file /usr/share/doc/postgresql/README.rpm-dist [1]. RedHat gives you more control over the placemant and layout of the postgres database(s).</p>
<p>See pg_lscluster.sh [2] below for more info on versions.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>/usr/bin/postgresql-setup<span class="w"> </span>--initdb
<span class="w"> </span>*<span class="w"> </span>Initializing<span class="w"> </span>database<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s1">&#39;/var/lib/pgsql/data&#39;</span>
<span class="w"> </span>*<span class="w"> </span>Initialized,<span class="w"> </span>logs<span class="w"> </span>are<span class="w"> </span><span class="k">in</span><span class="w"> </span>/var/lib/pgsql/initdb_postgresql.log
$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--now<span class="w"> </span>postgresql
$<span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>postgresql
</code></pre></div>

<ol>
<li><a href="https://fedoraproject.org/wiki/PostgreSQL/README.rpm-dist">https://fedoraproject.org/wiki/PostgreSQL/README.rpm-dist</a></li>
<li><a href="/postgresql.html#clusters">Clusters</a></li>
</ol>
<h4 id="check-out-all-these-options">Check out all these Options</h4>
<p>Check the databases installed, main (postgres) and two templates
 and list out available command line directives 
 (they start with the backslash (\) character)</p>
<div class="highlight"><pre><span></span><code><span class="err">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="o">-</span><span class="n">u</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="n">psql</span>
<span class="n">postgres</span><span class="o">-</span><span class="err">#</span><span class="w"> </span><span class="err">\</span><span class="n">l</span>
<span class="w">                              </span><span class="n">List</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">databases</span>
<span class="w">   </span><span class="n">Name</span><span class="w">    </span><span class="o">|</span><span class="w">  </span><span class="n">Owner</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Encoding</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Collate</span><span class="w"> </span><span class="o">|</span><span class="w">  </span><span class="n">Ctype</span><span class="w">  </span><span class="o">|</span><span class="w">   </span><span class="n">Access</span><span class="w"> </span><span class="k">privileges</span><span class="w">   </span>
<span class="o">-----------+----------+----------+---------+---------+-----------------------</span>
<span class="w"> </span><span class="n">postgres</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">UTF8</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span>
<span class="w"> </span><span class="n">template0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">UTF8</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">=</span><span class="n">c</span><span class="o">/</span><span class="n">postgres</span><span class="w">          </span><span class="o">+</span>
<span class="w">           </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">postgres</span><span class="o">=</span><span class="n">CTc</span><span class="o">/</span><span class="n">postgres</span>
<span class="w"> </span><span class="n">template1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">postgres</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">UTF8</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">=</span><span class="n">c</span><span class="o">/</span><span class="n">postgres</span><span class="w">          </span><span class="o">+</span>
<span class="w">           </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w">          </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"> </span><span class="n">postgres</span><span class="o">=</span><span class="n">CTc</span><span class="o">/</span><span class="n">postgres</span>
<span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span>

<span class="err">#</span><span class="w"> </span><span class="err">\</span><span class="vm">?</span>
<span class="k">General</span>
<span class="w">  </span><span class="err">\</span><span class="n">copyright</span><span class="w">             </span><span class="n">show</span><span class="w"> </span><span class="n">PostgreSQL</span><span class="w"> </span><span class="k">usage</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">distribution</span><span class="w"> </span><span class="n">terms</span>
<span class="w">  </span><span class="err">\</span><span class="n">crosstabview</span><span class="w"> </span><span class="o">[</span><span class="n">COLUMNS</span><span class="o">]</span><span class="w"> </span><span class="k">execute</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">crosstab</span>
<span class="w">  </span><span class="err">\</span><span class="n">errverbose</span><span class="w">            </span><span class="n">show</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">verbosity</span>
<span class="w">  </span><span class="err">\</span><span class="n">g</span><span class="w"> </span><span class="o">[</span><span class="n">(OPTIONS)</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">FILE</span><span class="o">]</span><span class="w">  </span><span class="k">execute</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="p">(</span><span class="ow">and</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">|</span><span class="n">pipe</span><span class="p">);</span>
<span class="w">                         </span><span class="err">\</span><span class="n">g</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">arguments</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">equivalent</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">semicolon</span>
<span class="w">  </span><span class="err">\</span><span class="n">gdesc</span><span class="w">                 </span><span class="k">describe</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">it</span>
<span class="w">  </span><span class="err">\</span><span class="n">gexec</span><span class="w">                 </span><span class="k">execute</span><span class="w"> </span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="k">execute</span><span class="w"> </span><span class="k">each</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="k">result</span>
<span class="w">  </span><span class="err">\</span><span class="n">gset</span><span class="w"> </span><span class="o">[</span><span class="n">PREFIX</span><span class="o">]</span><span class="w">         </span><span class="k">execute</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">psql</span><span class="w"> </span><span class="n">variables</span>
<span class="w">  </span><span class="err">\</span><span class="n">gx</span><span class="w"> </span><span class="o">[</span><span class="n">(OPTIONS)</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">FILE</span><span class="o">]</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">\</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">forces</span><span class="w"> </span><span class="n">expanded</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">mode</span>
<span class="w">  </span><span class="err">\</span><span class="n">q</span><span class="w">                     </span><span class="n">quit</span><span class="w"> </span><span class="n">psql</span>
<span class="w">  </span><span class="err">\</span><span class="n">watch</span><span class="w"> </span><span class="o">[</span><span class="n">SEC</span><span class="o">]</span><span class="w">           </span><span class="k">execute</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="k">every</span><span class="w"> </span><span class="n">SEC</span><span class="w"> </span><span class="n">seconds</span>

<span class="n">Help</span>
<span class="w">  </span><span class="err">\</span><span class="vm">?</span><span class="w"> </span><span class="o">[</span><span class="n">commands</span><span class="o">]</span><span class="w">          </span><span class="n">show</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">backslash</span><span class="w"> </span><span class="n">commands</span>
<span class="w">  </span><span class="err">\</span><span class="vm">?</span><span class="w"> </span><span class="n">options</span><span class="w">             </span><span class="n">show</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">psql</span><span class="w"> </span><span class="n">command</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">options</span>
<span class="w">  </span><span class="err">\</span><span class="vm">?</span><span class="w"> </span><span class="n">variables</span><span class="w">           </span><span class="n">show</span><span class="w"> </span><span class="n">help</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="n">variables</span>
<span class="w">  </span><span class="err">\</span><span class="n">h</span><span class="w"> </span><span class="o">[</span><span class="n">NAME</span><span class="o">]</span><span class="w">              </span><span class="n">help</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="n">commands</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">commands</span>

<span class="n">Query</span><span class="w"> </span><span class="n">Buffer</span>
<span class="w">  </span><span class="err">\</span><span class="n">e</span><span class="w"> </span><span class="o">[</span><span class="n">FILE</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">LINE</span><span class="o">]</span><span class="w">       </span><span class="n">edit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="p">(</span><span class="ow">or</span><span class="w"> </span><span class="k">file</span><span class="p">)</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">external</span><span class="w"> </span><span class="n">editor</span>
<span class="w">  </span><span class="err">\</span><span class="n">ef</span><span class="w"> </span><span class="o">[</span><span class="n">FUNCNAME [LINE</span><span class="o">]</span><span class="err">]</span><span class="w">  </span><span class="n">edit</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">external</span><span class="w"> </span><span class="n">editor</span>
<span class="w">  </span><span class="err">\</span><span class="n">ev</span><span class="w"> </span><span class="o">[</span><span class="n">VIEWNAME [LINE</span><span class="o">]</span><span class="err">]</span><span class="w">  </span><span class="n">edit</span><span class="w"> </span><span class="k">view</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">external</span><span class="w"> </span><span class="n">editor</span>
<span class="w">  </span><span class="err">\</span><span class="n">p</span><span class="w">                     </span><span class="n">show</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">contents</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">buffer</span>
<span class="w">  </span><span class="err">\</span><span class="n">r</span><span class="w">                     </span><span class="n">reset</span><span class="w"> </span><span class="p">(</span><span class="n">clear</span><span class="p">)</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">buffer</span>
<span class="w">  </span><span class="err">\</span><span class="n">s</span><span class="w"> </span><span class="o">[</span><span class="n">FILE</span><span class="o">]</span><span class="w">              </span><span class="n">display</span><span class="w"> </span><span class="n">history</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">save</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">file</span>
<span class="w">  </span><span class="err">\</span><span class="n">w</span><span class="w"> </span><span class="k">FILE</span><span class="w">                </span><span class="k">write</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">file</span>

<span class="k">Input</span><span class="o">/</span><span class="k">Output</span>
<span class="w">  </span><span class="err">\</span><span class="n">copy</span><span class="w"> </span><span class="p">...</span><span class="w">              </span><span class="n">perform</span><span class="w"> </span><span class="k">SQL</span><span class="w"> </span><span class="n">COPY</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="k">host</span>
<span class="w">  </span><span class="err">\</span><span class="n">echo</span><span class="w"> </span><span class="o">[</span><span class="n">-n</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">STRING</span><span class="o">]</span><span class="w">    </span><span class="k">write</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">newline</span><span class="p">)</span>
<span class="w">  </span><span class="err">\</span><span class="n">i</span><span class="w"> </span><span class="k">FILE</span><span class="w">                </span><span class="k">execute</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">file</span>
<span class="w">  </span><span class="err">\</span><span class="n">ir</span><span class="w"> </span><span class="k">FILE</span><span class="w">               </span><span class="k">as</span><span class="w"> </span><span class="err">\</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="k">relative</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">script</span>
<span class="w">  </span><span class="err">\</span><span class="n">o</span><span class="w"> </span><span class="o">[</span><span class="n">FILE</span><span class="o">]</span><span class="w">              </span><span class="n">send</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">|</span><span class="n">pipe</span>
<span class="w">  </span><span class="err">\</span><span class="n">qecho</span><span class="w"> </span><span class="o">[</span><span class="n">-n</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">STRING</span><span class="o">]</span><span class="w">   </span><span class="k">write</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="err">\</span><span class="n">o</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">newline</span><span class="p">)</span>
<span class="w">  </span><span class="err">\</span><span class="n">warn</span><span class="w"> </span><span class="o">[</span><span class="n">-n</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">STRING</span><span class="o">]</span><span class="w">    </span><span class="k">write</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">newline</span><span class="p">)</span>

<span class="n">Conditional</span>
<span class="w">  </span><span class="err">\</span><span class="k">if</span><span class="w"> </span><span class="n">EXPR</span><span class="w">               </span><span class="k">begin</span><span class="w"> </span><span class="n">conditional</span><span class="w"> </span><span class="n">block</span>
<span class="w">  </span><span class="err">\</span><span class="n">elif</span><span class="w"> </span><span class="n">EXPR</span><span class="w">             </span><span class="n">alternative</span><span class="w"> </span><span class="k">within</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">conditional</span><span class="w"> </span><span class="n">block</span>
<span class="w">  </span><span class="err">\</span><span class="k">else</span><span class="w">                  </span><span class="n">final</span><span class="w"> </span><span class="n">alternative</span><span class="w"> </span><span class="k">within</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">conditional</span><span class="w"> </span><span class="n">block</span>
<span class="w">  </span><span class="err">\</span><span class="n">endif</span><span class="w">                 </span><span class="k">end</span><span class="w"> </span><span class="n">conditional</span><span class="w"> </span><span class="n">block</span>

<span class="n">Informational</span>
<span class="w">  </span><span class="p">(</span><span class="nl">options</span><span class="p">:</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">show</span><span class="w"> </span><span class="k">system</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">additional</span><span class="w"> </span><span class="n">detail</span><span class="p">)</span>
<span class="w">  </span><span class="err">\</span><span class="n">d</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w">                 </span><span class="n">list</span><span class="w"> </span><span class="n">tables</span><span class="p">,</span><span class="w"> </span><span class="n">views</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">sequences</span>
<span class="w">  </span><span class="err">\</span><span class="n">d</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w">  </span><span class="n">NAME</span><span class="w">           </span><span class="k">describe</span><span class="w"> </span><span class="nc">table</span><span class="p">,</span><span class="w"> </span><span class="k">view</span><span class="p">,</span><span class="w"> </span><span class="k">sequence</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">index</span>
<span class="w">  </span><span class="err">\</span><span class="n">da</span><span class="o">[</span><span class="n">S</span><span class="o">]</span><span class="w">  </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">aggregates</span>
<span class="w">  </span><span class="err">\</span><span class="n">dA</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w">  </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">methods</span>
<span class="w">  </span><span class="err">\</span><span class="n">dAc</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">AMPTRN [TYPEPTRN</span><span class="o">]</span><span class="err">]</span><span class="w">  </span><span class="n">list</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">classes</span>
<span class="w">  </span><span class="err">\</span><span class="n">dAf</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">AMPTRN [TYPEPTRN</span><span class="o">]</span><span class="err">]</span><span class="w">  </span><span class="n">list</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">families</span>
<span class="w">  </span><span class="err">\</span><span class="n">dAo</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">AMPTRN [OPFPTRN</span><span class="o">]</span><span class="err">]</span><span class="w">   </span><span class="n">list</span><span class="w"> </span><span class="n">operators</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">families</span>
<span class="w">  </span><span class="err">\</span><span class="n">dAp</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">AMPTRN [OPFPTRN</span><span class="o">]</span><span class="err">]</span><span class="w">   </span><span class="n">list</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="n">functions</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="n">families</span>
<span class="w">  </span><span class="err">\</span><span class="n">db</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w">  </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">tablespaces</span>
<span class="w">  </span><span class="err">\</span><span class="n">dc</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">conversions</span>
<span class="w">  </span><span class="err">\</span><span class="n">dC</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w">  </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">casts</span>
<span class="w">  </span><span class="err">\</span><span class="n">dd</span><span class="o">[</span><span class="n">S</span><span class="o">]</span><span class="w">  </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">show</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">descriptions</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">displayed</span><span class="w"> </span><span class="n">elsewhere</span>
<span class="w">  </span><span class="err">\</span><span class="n">dD</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">domains</span>
<span class="w">  </span><span class="err">\</span><span class="n">ddp</span><span class="w">    </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="k">privileges</span>
<span class="w">  </span><span class="err">\</span><span class="n">dE</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="n">tables</span>
<span class="w">  </span><span class="err">\</span><span class="n">des</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="n">servers</span>
<span class="w">  </span><span class="err">\</span><span class="n">det</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="n">tables</span>
<span class="w">  </span><span class="err">\</span><span class="n">deu</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">mappings</span>
<span class="w">  </span><span class="err">\</span><span class="n">dew</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">foreign</span><span class="o">-</span><span class="k">data</span><span class="w"> </span><span class="n">wrappers</span>
<span class="w">  </span><span class="err">\</span><span class="n">df</span><span class="o">[</span><span class="n">anptw</span><span class="o">][</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">FUNCPTRN [TYPEPTRN ...</span><span class="o">]</span><span class="err">]</span>
<span class="w">                         </span><span class="n">list</span><span class="w"> </span><span class="o">[</span><span class="n">only agg/normal/procedure/trigger/window</span><span class="o">]</span><span class="w"> </span><span class="n">functions</span>
<span class="w">  </span><span class="err">\</span><span class="n">dF</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w">  </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="nc">text</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="n">configurations</span>
<span class="w">  </span><span class="err">\</span><span class="n">dFd</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="nc">text</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="n">dictionaries</span>
<span class="w">  </span><span class="err">\</span><span class="n">dFp</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="nc">text</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="n">parsers</span>
<span class="w">  </span><span class="err">\</span><span class="n">dFt</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="nc">text</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="n">templates</span>
<span class="w">  </span><span class="err">\</span><span class="n">dg</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">roles</span>
<span class="w">  </span><span class="err">\</span><span class="n">di</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">indexes</span>
<span class="w">  </span><span class="err">\</span><span class="n">dl</span><span class="w">                    </span><span class="n">list</span><span class="w"> </span><span class="k">large</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">\</span><span class="n">lo_list</span>
<span class="w">  </span><span class="err">\</span><span class="n">dL</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">procedural</span><span class="w"> </span><span class="n">languages</span>
<span class="w">  </span><span class="err">\</span><span class="n">dm</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">materialized</span><span class="w"> </span><span class="n">views</span>
<span class="w">  </span><span class="err">\</span><span class="n">dn</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">schemas</span>
<span class="w">  </span><span class="err">\</span><span class="n">do</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">OPPTRN [TYPEPTRN [TYPEPTRN</span><span class="o">]</span><span class="err">]]</span>
<span class="w">                         </span><span class="n">list</span><span class="w"> </span><span class="n">operators</span>
<span class="w">  </span><span class="err">\</span><span class="n">dO</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">collations</span>
<span class="w">  </span><span class="err">\</span><span class="n">dp</span><span class="w">     </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="nc">table</span><span class="p">,</span><span class="w"> </span><span class="k">view</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="k">sequence</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="k">privileges</span>
<span class="w">  </span><span class="err">\</span><span class="n">dP</span><span class="o">[</span><span class="n">itn+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">    </span><span class="n">list</span><span class="w"> </span><span class="o">[</span><span class="n">only index/table</span><span class="o">]</span><span class="w"> </span><span class="n">partitioned</span><span class="w"> </span><span class="n">relations</span><span class="w"> </span><span class="o">[</span><span class="n">n=nested</span><span class="o">]</span>
<span class="w">  </span><span class="err">\</span><span class="n">drds</span><span class="w"> </span><span class="o">[</span><span class="n">ROLEPTRN [DBPTRN</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">per</span><span class="o">-</span><span class="k">database</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class="n">settings</span>
<span class="w">  </span><span class="err">\</span><span class="n">dRp</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">replication</span><span class="w"> </span><span class="n">publications</span>
<span class="w">  </span><span class="err">\</span><span class="n">dRs</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">replication</span><span class="w"> </span><span class="n">subscriptions</span>
<span class="w">  </span><span class="err">\</span><span class="n">ds</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">sequences</span>
<span class="w">  </span><span class="err">\</span><span class="n">dt</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">tables</span>
<span class="w">  </span><span class="err">\</span><span class="n">dT</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="n">types</span>
<span class="w">  </span><span class="err">\</span><span class="n">du</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">roles</span>
<span class="w">  </span><span class="err">\</span><span class="n">dv</span><span class="o">[</span><span class="n">S+</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">views</span>
<span class="w">  </span><span class="err">\</span><span class="n">dx</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w">  </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">extensions</span>
<span class="w">  </span><span class="err">\</span><span class="n">dX</span><span class="w">     </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">extended</span><span class="w"> </span><span class="k">statistics</span>
<span class="w">  </span><span class="err">\</span><span class="n">dy</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w">  </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">triggers</span>
<span class="w">  </span><span class="err">\</span><span class="n">l</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w">   </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">list</span><span class="w"> </span><span class="n">databases</span>
<span class="w">  </span><span class="err">\</span><span class="n">sf</span><span class="o">[</span><span class="n">+</span><span class="o">]</span><span class="w">  </span><span class="n">FUNCNAME</span><span class="w">       </span><span class="n">show</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">function</span><span class="s1">&#39;s definition</span>
<span class="s1">  \sv[+]  VIEWNAME       show a view&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">definition</span>
<span class="w">  </span><span class="err">\</span><span class="n">z</span><span class="w">      </span><span class="o">[</span><span class="n">PATTERN</span><span class="o">]</span><span class="w">      </span><span class="n">same</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="err">\</span><span class="n">dp</span>

<span class="n">Formatting</span>
<span class="w">  </span><span class="err">\</span><span class="n">a</span><span class="w">                     </span><span class="n">toggle</span><span class="w"> </span><span class="ow">between</span><span class="w"> </span><span class="n">unaligned</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">aligned</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">mode</span>
<span class="w">  </span><span class="err">\</span><span class="n">C</span><span class="w"> </span><span class="o">[</span><span class="n">STRING</span><span class="o">]</span><span class="w">            </span><span class="k">set</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">unset</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">none</span>
<span class="w">  </span><span class="err">\</span><span class="n">f</span><span class="w"> </span><span class="o">[</span><span class="n">STRING</span><span class="o">]</span><span class="w">            </span><span class="n">show</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="n">separator</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">unaligned</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="k">output</span>
<span class="w">  </span><span class="err">\</span><span class="n">H</span><span class="w">                     </span><span class="n">toggle</span><span class="w"> </span><span class="n">HTML</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="p">(</span><span class="n">currently</span><span class="w"> </span><span class="k">off</span><span class="p">)</span>
<span class="w">  </span><span class="err">\</span><span class="n">pset</span><span class="w"> </span><span class="o">[</span><span class="n">NAME [VALUE</span><span class="o">]</span><span class="err">]</span><span class="w">   </span><span class="k">set</span><span class="w"> </span><span class="nc">table</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="k">option</span>
<span class="w">                         </span><span class="p">(</span><span class="n">border</span><span class="o">|</span><span class="n">columns</span><span class="o">|</span><span class="n">csv_fieldsep</span><span class="o">|</span><span class="n">expanded</span><span class="o">|</span><span class="n">fieldsep</span><span class="o">|</span>
<span class="w">                         </span><span class="n">fieldsep_zero</span><span class="o">|</span><span class="n">footer</span><span class="o">|</span><span class="nf">format</span><span class="o">|</span><span class="n">linestyle</span><span class="o">|</span><span class="k">null</span><span class="o">|</span>
<span class="w">                         </span><span class="n">numericlocale</span><span class="o">|</span><span class="n">pager</span><span class="o">|</span><span class="n">pager_min_lines</span><span class="o">|</span><span class="n">recordsep</span><span class="o">|</span>
<span class="w">                         </span><span class="n">recordsep_zero</span><span class="o">|</span><span class="n">tableattr</span><span class="o">|</span><span class="n">title</span><span class="o">|</span><span class="n">tuples_only</span><span class="o">|</span>
<span class="w">                         </span><span class="n">unicode_border_linestyle</span><span class="o">|</span><span class="n">unicode_column_linestyle</span><span class="o">|</span>
<span class="w">                         </span><span class="n">unicode_header_linestyle</span><span class="p">)</span>
<span class="w">  </span><span class="err">\</span><span class="n">t</span><span class="w"> </span><span class="o">[</span><span class="n">on|off</span><span class="o">]</span><span class="w">            </span><span class="n">show</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="p">(</span><span class="n">currently</span><span class="w"> </span><span class="k">off</span><span class="p">)</span>
<span class="w">  </span><span class="err">\</span><span class="n">T</span><span class="w"> </span><span class="o">[</span><span class="n">STRING</span><span class="o">]</span><span class="w">            </span><span class="k">set</span><span class="w"> </span><span class="n">HTML</span><span class="w"> </span><span class="o">&lt;</span><span class="nc">table</span><span class="o">&gt;</span><span class="w"> </span><span class="n">tag</span><span class="w"> </span><span class="n">attributes</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">unset</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">none</span>
<span class="w">  </span><span class="err">\</span><span class="n">x</span><span class="w"> </span><span class="o">[</span><span class="n">on|off|auto</span><span class="o">]</span><span class="w">       </span><span class="n">toggle</span><span class="w"> </span><span class="n">expanded</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="p">(</span><span class="n">currently</span><span class="w"> </span><span class="k">off</span><span class="p">)</span>

<span class="k">Connection</span>
<span class="w">  </span><span class="err">\</span><span class="n">c</span><span class="o">[</span><span class="n">onnect</span><span class="o">]</span><span class="w"> </span><span class="err">{</span><span class="o">[</span><span class="n">DBNAME|- USER|- HOST|- PORT|-</span><span class="o">]</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">conninfo</span><span class="err">}</span>
<span class="w">                         </span><span class="k">connect</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="p">(</span><span class="n">currently</span><span class="w"> </span><span class="ss">&quot;postgres&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="err">\</span><span class="n">conninfo</span><span class="w">              </span><span class="n">display</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="k">connection</span>
<span class="w">  </span><span class="err">\</span><span class="n">encoding</span><span class="w"> </span><span class="o">[</span><span class="n">ENCODING</span><span class="o">]</span><span class="w">   </span><span class="n">show</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">encoding</span>
<span class="w">  </span><span class="err">\</span><span class="n">password</span><span class="w"> </span><span class="o">[</span><span class="n">USERNAME</span><span class="o">]</span><span class="w">   </span><span class="n">securely</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">user</span>

<span class="n">Operating</span><span class="w"> </span><span class="k">System</span>
<span class="w">  </span><span class="err">\</span><span class="n">cd</span><span class="w"> </span><span class="o">[</span><span class="n">DIR</span><span class="o">]</span><span class="w">              </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">directory</span>
<span class="w">  </span><span class="err">\</span><span class="n">setenv</span><span class="w"> </span><span class="n">NAME</span><span class="w"> </span><span class="o">[</span><span class="n">VALUE</span><span class="o">]</span><span class="w">   </span><span class="k">set</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">unset</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="k">variable</span>
<span class="w">  </span><span class="err">\</span><span class="n">timing</span><span class="w"> </span><span class="o">[</span><span class="n">on|off</span><span class="o">]</span><span class="w">       </span><span class="n">toggle</span><span class="w"> </span><span class="n">timing</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">commands</span><span class="w"> </span><span class="p">(</span><span class="n">currently</span><span class="w"> </span><span class="k">off</span><span class="p">)</span>
<span class="w">  </span><span class="err">\!</span><span class="w"> </span><span class="o">[</span><span class="n">COMMAND</span><span class="o">]</span><span class="w">           </span><span class="k">execute</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="k">start</span><span class="w"> </span><span class="n">interactive</span><span class="w"> </span><span class="n">shell</span>

<span class="n">Variables</span>
<span class="w">  </span><span class="err">\</span><span class="n">prompt</span><span class="w"> </span><span class="o">[</span><span class="n">TEXT</span><span class="o">]</span><span class="w"> </span><span class="n">NAME</span><span class="w">    </span><span class="n">prompt</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">internal</span><span class="w"> </span><span class="k">variable</span>
<span class="w">  </span><span class="err">\</span><span class="k">set</span><span class="w"> </span><span class="o">[</span><span class="n">NAME [VALUE</span><span class="o">]</span><span class="err">]</span><span class="w">    </span><span class="k">set</span><span class="w"> </span><span class="n">internal</span><span class="w"> </span><span class="k">variable</span><span class="p">,</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="k">parameters</span>
<span class="w">  </span><span class="err">\</span><span class="n">unset</span><span class="w"> </span><span class="n">NAME</span><span class="w">            </span><span class="n">unset</span><span class="w"> </span><span class="p">(</span><span class="k">delete</span><span class="p">)</span><span class="w"> </span><span class="n">internal</span><span class="w"> </span><span class="k">variable</span>

<span class="k">Large</span><span class="w"> </span><span class="n">Objects</span>
<span class="w">  </span><span class="err">\</span><span class="n">lo_export</span><span class="w"> </span><span class="n">LOBOID</span><span class="w"> </span><span class="k">FILE</span>
<span class="w">  </span><span class="err">\</span><span class="n">lo_import</span><span class="w"> </span><span class="k">FILE</span><span class="w"> </span><span class="o">[</span><span class="n">COMMENT</span><span class="o">]</span>
<span class="w">  </span><span class="err">\</span><span class="n">lo_list</span>
<span class="w">  </span><span class="err">\</span><span class="n">lo_unlink</span><span class="w"> </span><span class="n">LOBOID</span><span class="w">      </span><span class="k">large</span><span class="w"> </span><span class="k">object</span><span class="w"> </span><span class="n">operations</span>
<span class="p">(</span><span class="k">END</span><span class="p">)</span>

<span class="err">#\</span><span class="n">q</span>
</code></pre></div>

<h4 id="clusters">Clusters</h4>
<p>Before you can do anything, you must initialize a database storage area on disk. This is called a database cluster. A database cluster is a collection of databases that are managed by a single instance of a running database server.</p>
<blockquote>
<p>RedHat does not install pg_ctlcluster as it is an extension for Ubuntu package postgresql-common</p>
</blockquote>
<p>Clusters are the best way to run several versions of PostgreSQL on the same host,</p>
<p>Reference: <a href="https://www.postgresql.org/docs/current/creating-cluster.html">https://www.postgresql.org/docs/current/creating-cluster.html</a></p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pg_ctlcluster
Usage:<span class="w"> </span>/usr/bin/pg_ctlcluster<span class="w"> </span>&lt;version&gt;<span class="w"> </span>&lt;cluster&gt;<span class="w"> </span>&lt;action&gt;

$<span class="w"> </span>pg_lsclusters
Ver<span class="w"> </span>Cluster<span class="w"> </span>Port<span class="w"> </span>Status<span class="w"> </span>Owner<span class="w">    </span>Data<span class="w"> </span>directory<span class="w">              </span>Log<span class="w"> </span>file
<span class="m">13</span><span class="w">  </span>main<span class="w">    </span><span class="m">5432</span><span class="w"> </span>down<span class="w">   </span>postgres<span class="w"> </span>/var/lib/postgresql/13/main<span class="w"> </span>/var/log/postgresql/postgresql-13-main.log

$<span class="w"> </span>pg_ctlcluster<span class="w"> </span><span class="m">13</span><span class="w"> </span>main<span class="w"> </span>start

$<span class="w"> </span>pg_lsclusters
Ver<span class="w"> </span>Cluster<span class="w"> </span>Port<span class="w"> </span>Status<span class="w"> </span>Owner<span class="w">    </span>Data<span class="w"> </span>directory<span class="w">              </span>Log<span class="w"> </span>file
<span class="m">13</span><span class="w">  </span>main<span class="w">    </span><span class="m">5432</span><span class="w"> </span>online<span class="w"> </span>postgres<span class="w"> </span>/var/lib/postgresql/13/main<span class="w"> </span>/var/log/postgresql/postgresql-13-main.log
</code></pre></div>

<ul>
<li>RedHat Version</li>
</ul>
<p>The location of files is determined by the initdb program, which was run earlier.</p>
<p>File: ~/pg_lscluster.sh </p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">##############################################################</span>
<span class="c1"># </span>
<span class="c1"># File: pg_lscluster</span>
<span class="c1">#</span>
<span class="c1"># Purpose: List information on postgresql installed clusters</span>
<span class="c1">#</span>
<span class="c1"># Reason: pg_lscluster only exists for the postgresql-common</span>
<span class="c1">#          package on Ubuntu. This script was created for</span>
<span class="c1">#          non-Ubuntu Linux distributions.</span>
<span class="c1">#</span>
<span class="c1"># Versions: To do that simply </span>
<span class="c1">#  1) Place the postgresql.conf files in versions:</span>
<span class="c1">#     i.e.: /etc/postgres/&lt;version&gt;/main/postgresql.conf</span>
<span class="c1">#  2) Create services with versions:</span>
<span class="c1">#     i.e.: postgresql@&lt;version&gt;-main.service</span>
<span class="c1">#  Of course data_directory and log_directory must also have</span>
<span class="c1">#   versions, and port numbers must be different,</span>
<span class="c1">#   but this script does not care. ;-)</span>
<span class="c1">#</span>
<span class="c1"># History</span>
<span class="c1"># When        Who         Description</span>
<span class="c1"># ----------- ----------- -----------------------------------------</span>
<span class="c1"># 12-Jun-2023 Don Cohoon  Created</span>
<span class="c1">##############################################################</span>
<span class="nv">TMP</span><span class="o">=</span><span class="k">$(</span>mktemp<span class="k">)</span>
<span class="c1">#-----------</span>
<span class="k">function</span><span class="w"> </span>details<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nv">SERVICE</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span>
<span class="w">  </span><span class="nv">PORT</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="si">}</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span><span class="si">${</span><span class="nv">SERVICE</span><span class="si">}</span><span class="w"> </span>&gt;<span class="w"> </span><span class="si">${</span><span class="nv">TMP</span><span class="si">}</span>
<span class="w">  </span>grep<span class="w"> </span>-e<span class="w"> </span>active<span class="w"> </span>-e<span class="w"> </span>PID<span class="w"> </span><span class="si">${</span><span class="nv">TMP</span><span class="si">}</span>
<span class="w">  </span><span class="c1"># Main PID: 904 (postmaster)</span>
<span class="w">  </span><span class="nv">PROCESS</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span>PID<span class="w"> </span><span class="si">${</span><span class="nv">TMP</span><span class="si">}</span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;(&#39;</span><span class="w"> </span>-f2<span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;)&#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="w">  </span><span class="c1"># Grab the &#39;-D &lt;directory&gt;&#39; run-time parameter</span>
<span class="w">  </span><span class="nv">DIR</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span>/bin/<span class="si">${</span><span class="nv">PROCESS</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">TMP</span><span class="si">}</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $4}&#39;</span><span class="k">)</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span><span class="nb">echo</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>ls<span class="w"> </span><span class="si">${</span><span class="nv">DIR</span><span class="si">}</span>/log<span class="w"> </span>&gt;<span class="si">${</span><span class="nv">TMP</span><span class="si">}</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-s<span class="w"> </span><span class="si">${</span><span class="nv">TMP</span><span class="si">}</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;   Log directory: </span><span class="si">${</span><span class="nv">DIR</span><span class="si">}</span><span class="s2">/log&quot;</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-d<span class="w"> </span>/var/log/postgresql<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;   Log directory: /var/log/postgresql&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span><span class="nb">echo</span>
<span class="w">  </span><span class="c1">#</span>
<span class="w">  </span>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>psql<span class="w"> </span>-tq<span class="w"> </span>-p<span class="w"> </span><span class="si">${</span><span class="nv">PORT</span><span class="si">}</span><span class="w"> </span><span class="s">&lt;&lt;EOF 2&gt;/dev/null</span>
<span class="s">--  SELECT &#39;    Current Logfile: &#39; || pg_current_logfile();</span>
<span class="s">  SELECT &#39;  Port: &#39; || setting</span>
<span class="s">    FROM pg_settings</span>
<span class="s">   WHERE name = &#39;port&#39;;</span>
<span class="s">  SELECT &#39;  Data directory: &#39; || setting</span>
<span class="s">    FROM pg_settings</span>
<span class="s">   WHERE name = &#39;data_directory&#39;;</span>
<span class="s">  SELECT &#39;  Config File: &#39; || setting</span>
<span class="s">    FROM pg_settings</span>
<span class="s">   WHERE name = &#39;config_file&#39;;</span>
<span class="s">  SELECT &#39;  Host Based Access File: &#39; || setting</span>
<span class="s">    FROM pg_settings</span>
<span class="s">   WHERE name = &#39;hba_file&#39;;</span>
<span class="s">EOF</span>
<span class="w">  </span>rm<span class="w"> </span><span class="si">${</span><span class="nv">TMP</span><span class="si">}</span>
<span class="o">}</span><span class="w"> </span><span class="c1"># details</span>
<span class="c1">#-----------</span>
<span class="nb">echo</span>
<span class="c1">#</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-f<span class="w"> </span>/usr/bin/pg_config<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="k">then</span>
<span class="w">  </span><span class="nv">V</span><span class="o">=</span><span class="k">$(</span>/usr/bin/pg_config<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $4}&#39;</span><span class="k">)</span>
<span class="k">else</span>
<span class="w">  </span><span class="nv">V</span><span class="o">=</span><span class="k">$(</span>/usr/bin/postgres<span class="w"> </span>-V<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $NF}&#39;</span><span class="k">)</span>
<span class="k">fi</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;   Default Version:  </span><span class="si">${</span><span class="nv">V</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">echo</span>
<span class="c1">#</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>-d<span class="w"> </span>/etc/postgresql/<span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w"> </span><span class="k">for</span><span class="w"> </span>VER<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>ls<span class="w"> </span>/etc/postgresql/<span class="k">)</span><span class="w"> </span><span class="c1"># return installed versions </span>
<span class="w">  </span><span class="k">do</span>
<span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;= = = = =&gt; Version: </span><span class="nv">$VER</span><span class="s2">&quot;</span>
<span class="w">   </span><span class="nv">PORT</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span><span class="s1">&#39;^port&#39;</span><span class="w"> </span>/etc/postgresql/<span class="si">${</span><span class="nv">VER</span><span class="si">}</span>/main/postgresql.conf<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $3}&#39;</span><span class="k">)</span>
<span class="w">   </span>details<span class="w"> </span>postgresql@<span class="si">${</span><span class="nv">VER</span><span class="si">}</span>-main.service<span class="w"> </span><span class="si">${</span><span class="nv">PORT</span><span class="si">}</span>
<span class="w">  </span><span class="k">done</span>
<span class="k">else</span><span class="w"> </span><span class="c1"># only one default version</span>
<span class="w">  </span>details<span class="w"> </span>postgresql<span class="w"> </span><span class="m">5432</span>
<span class="k">fi</span>
<span class="c1">#</span>
</code></pre></div>

<ul>
<li>Ubuntu</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># ~/pg_lscluster.sh </span>

<span class="w">   </span><span class="n">Default</span><span class="w"> </span><span class="n">Version</span><span class="p">:</span><span class="w">  </span><span class="mf">14.8</span>

<span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Version</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="w">     </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">inactive</span><span class="w"> </span><span class="p">(</span><span class="n">dead</span><span class="p">)</span>

<span class="w">   </span><span class="n">Log</span><span class="w"> </span><span class="n">directory</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">postgresql</span>

<span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Version</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span>
<span class="w">     </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Sat</span><span class="w"> </span><span class="mi">2023</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">47</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="n">ago</span>
<span class="w">   </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">1485</span><span class="w"> </span><span class="p">(</span><span class="n">postgres</span><span class="p">)</span>

<span class="w">   </span><span class="n">Log</span><span class="w"> </span><span class="n">directory</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">postgresql</span>

<span class="w">   </span><span class="n">Port</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span>

<span class="w">   </span><span class="n">Data</span><span class="w"> </span><span class="n">directory</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="mi">12</span><span class="o">/</span><span class="n">main</span>

<span class="w">   </span><span class="n">Config</span><span class="w"> </span><span class="n">File</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="mi">12</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">postgresql</span><span class="o">.</span><span class="n">conf</span>

<span class="w">   </span><span class="n">Host</span><span class="w"> </span><span class="n">Based</span><span class="w"> </span><span class="n">Access</span><span class="w"> </span><span class="n">File</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="mi">12</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">pg_hba</span><span class="o">.</span><span class="n">conf</span>

<span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Version</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span>
<span class="w">     </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Sat</span><span class="w"> </span><span class="mi">2023</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="mi">16</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">47</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">days</span><span class="w"> </span><span class="n">ago</span>
<span class="w">   </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">1462</span><span class="w"> </span><span class="p">(</span><span class="n">postgres</span><span class="p">)</span>

<span class="w">   </span><span class="n">Log</span><span class="w"> </span><span class="n">directory</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">postgresql</span>

<span class="w">   </span><span class="n">Port</span><span class="p">:</span><span class="w"> </span><span class="mi">5433</span>

<span class="w">   </span><span class="n">Data</span><span class="w"> </span><span class="n">directory</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="mi">14</span><span class="o">/</span><span class="n">main</span>

<span class="w">   </span><span class="n">Config</span><span class="w"> </span><span class="n">File</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="mi">14</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">postgresql</span><span class="o">.</span><span class="n">conf</span>

<span class="w">   </span><span class="n">Host</span><span class="w"> </span><span class="n">Based</span><span class="w"> </span><span class="n">Access</span><span class="w"> </span><span class="n">File</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">postgresql</span><span class="o">/</span><span class="mi">14</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">pg_hba</span><span class="o">.</span><span class="n">conf</span>
</code></pre></div>

<ul>
<li>RedHat</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># ~/pg_lscluster.sh </span>

<span class="w">   </span><span class="n">Default</span><span class="w"> </span><span class="n">Version</span><span class="p">:</span><span class="w">  </span><span class="mf">13.10</span>

<span class="w">     </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Tue</span><span class="w"> </span><span class="mi">2023</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">13</span><span class="w"> </span><span class="mi">06</span><span class="p">:</span><span class="mi">04</span><span class="p">:</span><span class="mi">30</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">2</span><span class="n">h</span><span class="w"> </span><span class="mi">13</span><span class="nb">min</span><span class="w"> </span><span class="n">ago</span>
<span class="w">   </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">904</span><span class="w"> </span><span class="p">(</span><span class="n">postmaster</span><span class="p">)</span>

<span class="w">   </span><span class="n">Log</span><span class="w"> </span><span class="n">directory</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pgsql</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="nb">log</span>

<span class="w">   </span><span class="n">Port</span><span class="p">:</span><span class="w"> </span><span class="mi">5432</span>

<span class="w">   </span><span class="n">Data</span><span class="w"> </span><span class="n">directory</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pgsql</span><span class="o">/</span><span class="n">data</span>

<span class="w">   </span><span class="n">Config</span><span class="w"> </span><span class="n">File</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pgsql</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">postgresql</span><span class="o">.</span><span class="n">conf</span>

<span class="w">   </span><span class="n">Host</span><span class="w"> </span><span class="n">Based</span><span class="w"> </span><span class="n">Access</span><span class="w"> </span><span class="n">File</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pgsql</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">pg_hba</span><span class="o">.</span><span class="n">conf</span>
</code></pre></div>

<h4 id="log-file">Log File</h4>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>tail<span class="w"> </span>-40<span class="w">  </span>/var/log/postgresql/postgresql-13-main.log
<span class="m">2018</span>-11-16<span class="w"> </span><span class="m">06</span>:04:16.889<span class="w"> </span>EST<span class="w"> </span><span class="o">[</span><span class="m">1019</span><span class="o">]</span><span class="w"> </span>LOG:<span class="w">  </span>received<span class="w"> </span>fast<span class="w"> </span>shutdown<span class="w"> </span>request
<span class="m">2018</span>-11-16<span class="w"> </span><span class="m">06</span>:04:16.892<span class="w"> </span>EST<span class="w"> </span><span class="o">[</span><span class="m">1019</span><span class="o">]</span><span class="w"> </span>LOG:<span class="w">  </span>aborting<span class="w"> </span>any<span class="w"> </span>active<span class="w"> </span>transactions
<span class="m">2018</span>-11-16<span class="w"> </span><span class="m">06</span>:04:16.897<span class="w"> </span>EST<span class="w"> </span><span class="o">[</span><span class="m">1019</span><span class="o">]</span><span class="w"> </span>LOG:<span class="w">  </span>worker<span class="w"> </span>process:<span class="w"> </span>logical<span class="w"> </span>replication<span class="w"> </span>launcher<span class="w"> </span><span class="o">(</span>PID<span class="w"> </span><span class="m">1034</span><span class="o">)</span><span class="w"> </span>exited<span class="w"> </span>with<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>code<span class="w"> </span><span class="m">1</span>
<span class="m">2018</span>-11-16<span class="w"> </span><span class="m">06</span>:04:16.901<span class="w"> </span>EST<span class="w"> </span><span class="o">[</span><span class="m">1029</span><span class="o">]</span><span class="w"> </span>LOG:<span class="w">  </span>shutting<span class="w"> </span>down
<span class="m">2018</span>-11-16<span class="w"> </span><span class="m">06</span>:04:16.942<span class="w"> </span>EST<span class="w"> </span><span class="o">[</span><span class="m">1019</span><span class="o">]</span><span class="w"> </span>LOG:<span class="w">  </span>database<span class="w"> </span>system<span class="w"> </span>is<span class="w"> </span>shut<span class="w"> </span>down
</code></pre></div>

<h4 id="configuration-file">Configuration File</h4>
<p>There are many configuration parameters that affect the behavior of the database system. </p>
<p>Reference: <a href="https://www.postgresql.org/docs/current/runtime-config.html">https://www.postgresql.org/docs/current/runtime-config.html</a></p>
<p>Debian</p>
<div class="highlight"><pre><span></span><code>postgres=# show config_file;
               config_file               
-----------------------------------------
 /etc/postgresql/12/main/postgresql.conf
(1 row)
</code></pre></div>

<p>RedHat</p>
<div class="highlight"><pre><span></span><code><span class="c1"># show config_file;</span>
<span class="w">             </span><span class="n">config_file</span><span class="w">             </span>
<span class="o">-------------------------------------</span>
<span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pgsql</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">postgresql</span><span class="o">.</span><span class="n">conf</span>
<span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">row</span><span class="p">)</span>
</code></pre></div>

<h4 id="host-based-authentication-hba-file">Host Based Authentication (HBA) File</h4>
<p>Client authentication is controlled by a configuration file, which traditionally is named pg_hba.conf and is stored in the database cluster's data directory. (HBA stands for host-based authentication.)</p>
<p>Reference: <a href="https://www.postgresql.org/docs/current/auth-pg-hba-conf.html">https://www.postgresql.org/docs/current/auth-pg-hba-conf.html</a></p>
<p>Debian</p>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> show hba_file;
              hba_file               
-------------------------------------
 /etc/postgresql/12/main/pg_hba.conf
(1 row)
</code></pre></div>

<p>RedHat</p>
<div class="highlight"><pre><span></span><code><span class="c1"># show hba_file;</span>
<span class="w">            </span><span class="n">hba_file</span><span class="w">             </span>
<span class="o">---------------------------------</span>
<span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">pgsql</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">pg_hba</span><span class="o">.</span><span class="n">conf</span>
<span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">row</span><span class="p">)</span>
</code></pre></div>

<h2 id="psql-pager-pspg">psql pager - pspg</h2>
<p>The command line paging defaults to <code>less</code> but you can install a much better one.</p>
<p>Pspg supports searching, selecting rows, columns, or block and export selected area to clipboard. 
Check out the screenshots, installation options and animation on the website. Super useful productivity tool!</p>
<p>Reference:  <a href="https://github.com/okbob/pspg">https://github.com/okbob/pspg</a></p>
<h4 id="install_1">Install</h4>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>pspg
</code></pre></div>

<h4 id="helper-script">Helper Script</h4>
<p>Create a helper script to run it. Add /usr/local/bin to your PATH if not already.</p>
<blockquote>
<p>I defaulted it to a database named <code>mydb</code>. Change it to your favorite database, or just remove the <code>-d mydb</code> part of the <code>sudo</code> line.</p>
</blockquote>
<p>File: /usr/local/bin/psql.sh</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># https://github.com/okbob/pspg</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;-&gt; Fancy pager (pspg) [-s 1,2,3,4,...20] &lt;- themes&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\set xx &#39;\\\\setenv PAGER \&#39;pspg -bX --no-mouse -s 5\&#39;&#39;&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;:xx&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;-&gt; Default pager (less)&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;\set x &#39;\\\\setenv PAGER less&#39;&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;:x&quot;</span>
sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>psql<span class="w"> </span>-d<span class="w"> </span>mydb<span class="w"> </span><span class="nv">$@</span>
</code></pre></div>

<h4 id="example">Example</h4>
<p>pspg allows paging forward, backward, as well as scrolling right and left with arrow keys.</p>
<p>Execute a file from the script parameter name</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>now.sql<span class="w"> </span>
<span class="k">select</span><span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>now<span class="o">()</span><span class="p">;</span>

$<span class="w"> </span>psql.sh<span class="w"> </span>-f<span class="w"> </span>now.sql
-&gt;<span class="w"> </span>Fancy<span class="w"> </span>pager<span class="w"> </span><span class="o">(</span>pspg<span class="o">)</span><span class="w"> </span><span class="o">[</span>-s<span class="w"> </span><span class="m">1</span>,2,3,4,...20<span class="o">]</span><span class="w"> </span>&lt;-<span class="w"> </span>themes
<span class="se">\s</span>et<span class="w"> </span>xx<span class="w"> </span><span class="s1">&#39;\\setenv PAGER \&#39;</span>pspg<span class="w"> </span>-bX<span class="w"> </span>--no-mouse<span class="w"> </span>-s<span class="w"> </span><span class="m">5</span><span class="se">\&#39;</span><span class="s1">&#39;</span>
<span class="s1">:xx</span>
<span class="s1">-&gt; Default pager (less)</span>
<span class="s1">\set x &#39;</span><span class="se">\\</span>setenv<span class="w"> </span>PAGER<span class="w"> </span>less<span class="err">&#39;</span>
:x
<span class="w">              </span>now<span class="w">              </span>
-------------------------------
<span class="w"> </span><span class="m">2023</span>-01-28<span class="w"> </span><span class="m">19</span>:42:07.897614-05
<span class="o">(</span><span class="m">1</span><span class="w"> </span>row<span class="o">)</span>
</code></pre></div>

<p>Example using the pager.</p>
<p>Copy &amp; Paste <code>\set xx '\\setenv PAGER \'pspg -bX --no-mouse -s 5\''</code> into the prompt, hit Enter.
Remember to enter <code>:xx</code> to run the pspg pager.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>psql.sh<span class="w"> </span>
-&gt;<span class="w"> </span>Fancy<span class="w"> </span>pager<span class="w"> </span><span class="o">(</span>pspg<span class="o">)</span><span class="w"> </span><span class="o">[</span>-s<span class="w"> </span><span class="m">1</span>,2,3,4,...20<span class="o">]</span><span class="w"> </span>&lt;-<span class="w"> </span>themes
<span class="se">\s</span>et<span class="w"> </span>xx<span class="w"> </span><span class="s1">&#39;\\setenv PAGER \&#39;</span>pspg<span class="w"> </span>-bX<span class="w"> </span>--no-mouse<span class="w"> </span>-s<span class="w"> </span><span class="m">5</span><span class="se">\&#39;</span><span class="s1">&#39;</span>
<span class="s1">:xx</span>
<span class="s1">-&gt; Default pager (less)</span>
<span class="s1">\set x &#39;</span><span class="se">\\</span>setenv<span class="w"> </span>PAGER<span class="w"> </span>less<span class="s1">&#39;</span>
<span class="s1">:x</span>
<span class="s1">psql (14.5 (Ubuntu 14.5-0ubuntu0.22.04.1), server 12.12 (Ubuntu 12.12-0ubuntu0.20.04.1))</span>
<span class="s1">Type &quot;help&quot; for help.</span>

<span class="s1">mydb=# \set xx &#39;</span><span class="se">\\</span>setenv<span class="w"> </span>PAGER<span class="w"> </span><span class="se">\&#39;</span>pspg<span class="w"> </span>-bX<span class="w"> </span>--no-mouse<span class="w"> </span>-s<span class="w"> </span><span class="m">5</span><span class="se">\&#39;</span><span class="err">&#39;</span>
<span class="nv">mydb</span><span class="o">=</span><span class="c1"># :xx</span>
mydb-#<span class="w"> </span><span class="k">select</span><span class="w"> </span>*<span class="w"> </span>from<span class="w"> </span>mydb.log_file<span class="w"> </span><span class="p">;</span>
</code></pre></div>

<p><img alt="pspg.png" src="/images/pspg.png"></p>
<h2 id="continue">Continue</h2>
<p>Now that you have installed a shiny new database, consider how upgrades work.</p>
<p>In our next episode of Linux in the Home.</p>
<p>Proceed in the order presented, some things are depending on prior setups.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://lwn.net/">Linux Weekly News</a></li>
                            <li><a href="https://fullcirclemagazine.org/">Full Circle Magazine</a></li>
                            <li><a href="https://www.linuxjournal.com/">Linux Journal</a></li>
                            <li><a href="https://www.linux-magazine.com/">Linux Magazine</a></li>
                            <li><a href="https://www.thefarside.com/">The Far Side</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://dfcsoftware.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://fosstodon.org/@LinuxintheHouse">Feedback</a></li>
                            <li><a href="https://fosstodon.org/@LinuxintheHouse.rss">Mastodon RSS feed</a></li>
                            <li><a href="https://linux-in-the-house.pages.dev/">Book</a></li>
                            <li><a href="/author/don-cohoon.html">Created by: Don Cohoon</a></li>
                            <li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License </a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>
                Site by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, via <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </p><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                <p> Version:  3.44 </p>
        </footer><!-- /#contentinfo -->

</body>
</html>