<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>VirtualIP</title>
        <link rel="stylesheet" href="https://dfcsoftware.github.io/theme/css/main.css" />
        <link href="https://dfcsoftware.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Linux Home Administration Atom Feed" />
        <meta name="description" content="Virtual IP Ethernet Interface Virtual IP Interface behaves like a normal interface. All traffic routed to it will go through the master interface..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <table>
                    <td><h1><a href="https://dfcsoftware.github.io/">Linux Home Administration</a></h1></td>
                    <td>   <!-- Note the usage of `type=module` here as this is an ES6 module --> <script type="module">
    // Use ES module import syntax to import functionality from the module
    // that we have compiled.
    //
    // Note that the `default` import is an initialization function which
    // will "boot" the module and make it ready to use. Currently browsers
    // don't support natively imported WebAssembly as an ES module, but
    // eventually the manual initialization won't be required!
    // import { search, default as init } from './tinysearch_engine.js';
    import { search, default as init } from '/tinysearch_engine.js';
    window.search = search;

    async function run() {
      // First up we need to actually load the wasm file, so we use the
      // default export to inform it where the wasm file is located on the
      // server, and then we wait on the returned promise to wait for the
      // wasm to be loaded.
      //
      // Note that instead of a string here you can also pass in an instance
      // of `WebAssembly.Module` which allows you to compile your own module.
      // Also note that the promise, when resolved, yields the wasm module's
      // exports which is the same as importing the `*_bg` module in other
      // modes
      await init('/tinysearch_engine_bg.wasm');
    }

    run();
  </script>

  <script>
    // And afterwards we can use all the functionality defined in wasm.
    function doSearch() {
      let value = document.getElementById("searcher").value;
      console.log(`Search query: ${value}`);

      const results = search(value, 5);

      console.log(`Results: ${results}`);

      let ul = document.getElementById("results");
      ul.innerHTML = "";

      for (i = 0; i < results.length; i++) {
        var li = document.createElement("li");

        let [title, url] = results[i];
        let elemlink = document.createElement('a');
        elemlink.innerHTML = title;
        elemlink.setAttribute('href', url);
        li.appendChild(elemlink);

        ul.appendChild(li);
      }
    }
  </script>

<div style="text-align:right"> 
  <h2> 
    <object type="image/svg+xml" data="/theme/images/search.svg" style="width:5%; height:10%;">
       Search<!-- fallback image in CSS -->
    </object>
    <input type="text" id="searcher" onkeyup="doSearch()">
  </h2>
  <ul style="list-style-type: none;text-align: left;" id="results">
  </ul>
</div> </td>
                </table>
                <nav><ul>
                    <li><a href="https://dfcsoftware.github.io/category/forest.html">forest</a></li>
                    <li class="active"><a href="https://dfcsoftware.github.io/category/linux.html">linux</a></li>
                    <li><a href="https://dfcsoftware.github.io/category/writing.html">writing</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://dfcsoftware.github.io/virtualip.html" rel="bookmark"
           title="Permalink to VirtualIP">VirtualIP</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2023-02-27T10:20:00-05:00">
                Published: Mon 27 February 2023
        </abbr>
		<br />
        <abbr class="modified" title="2024-04-19T09:30:00-04:00">
                Updated: Fri 19 April 2024
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://dfcsoftware.github.io/author/don-cohoon.html">Don Cohoon</a>
        </address>
<p>In <a href="https://dfcsoftware.github.io/category/linux.html">linux</a>.</p>
<p>tags: <a href="https://dfcsoftware.github.io/tag/network.html">network</a> </p>
</footer><!-- /.post-info -->      <h1 id="virtual-ip-ethernet-interface">Virtual IP Ethernet Interface</h1>
<p>Virtual IP Interface behaves like a normal interface. All traffic routed to it will go through the master interface (for example, eth0) but with a VLAN tag. Only VLAN-aware devices can accept them if configured correctly, else the traffic is dropped. </p>
<p><br/></p>
<hr>
<div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#virtual-ip-ethernet-interface">Virtual IP Ethernet Interface</a><ul>
<li><a href="#networkd-virtual-ip">NetworkD Virtual IP</a></li>
<li><a href="#create-vlan-from-command-line">Create vlan from command line</a><ul>
<li><a href="#redhat-version">Redhat Version</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<hr>
<p>You can create a Virtual IP address for special routing purposes or security. Normally these are used for server to server connections, or to isolate guest connections.</p>
<h2 id="networkd-virtual-ip">NetworkD Virtual IP</h2>
<ul>
<li>Create a file in directory /etc/netplan ending with yaml. They will be processed in numeric/alphabetical order.</li>
</ul>
<p>File: /etc/netplan/60-vlan-init.yaml </p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">Remove</span><span class="w"> </span><span class="nx">NetworkManager</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="nx">second</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">Don</span><span class="w"> </span><span class="nx">Sept</span><span class="w"> </span><span class="mi">2019</span>
<span class="nx">network</span><span class="p">:</span>
<span class="w">  </span><span class="nx">version</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="nx">renderer</span><span class="p">:</span><span class="w"> </span><span class="nx">networkd</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">ERROR</span><span class="p">:</span><span class="w"> </span><span class="nx">vlan1</span><span class="p">:</span><span class="w"> </span><span class="nx">NetworkManager</span><span class="w"> </span><span class="nx">only</span><span class="w"> </span><span class="nx">supports</span><span class="w"> </span><span class="nx">global</span><span class="w"> </span><span class="nx">scoped</span><span class="w"> </span><span class="nx">routes</span>
<span class="w">  </span><span class="err">#</span><span class="nx">renderer</span><span class="p">:</span><span class="w"> </span><span class="nx">NetworkManager</span>
<span class="w">  </span><span class="nx">ethernets</span><span class="p">:</span>
<span class="w">    </span><span class="nx">eno1</span><span class="p">:</span>
<span class="w">      </span><span class="nx">addresses</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m m-Double">192.168.1.3</span><span class="o">/</span><span class="mi">24</span><span class="p">]</span>
<span class="w">      </span><span class="nx">gateway4</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">192.168.1.1</span>
<span class="w">      </span><span class="nx">nameservers</span><span class="p">:</span>
<span class="w">        </span><span class="nx">addresses</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m m-Double">1.1.1.1</span><span class="p">,</span><span class="w"> </span><span class="m m-Double">1.0.0.1</span><span class="p">]</span>
<span class="w">      </span><span class="nx">optional</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="nx">eno2</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="nx">vlans</span><span class="p">:</span>
<span class="w">    </span><span class="nx">vlan1</span><span class="p">:</span>
<span class="w">      </span><span class="nx">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="nx">link</span><span class="p">:</span><span class="w"> </span><span class="nx">eno1</span>
<span class="w">      </span><span class="nx">addresses</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="m m-Double">192.168.2.3</span><span class="o">/</span><span class="mi">24</span><span class="p">]</span>
</code></pre></div>

<ul>
<li>Try the change in debug mode first:</li>
</ul>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>netplan<span class="w"> </span>--debug<span class="w"> </span>try
DEBUG:eno1<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{}</span>
DEBUG:eno2<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="s1">&#39;eno1&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;addresses&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;192.168.1.3/24&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;gateway4&#39;</span>:<span class="w"> </span><span class="s1">&#39;192.168.1.1&#39;</span>,<span class="w"> </span><span class="s1">&#39;nameservers&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;addresses&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;1.1.1.1&#39;</span>,<span class="w"> </span><span class="s1">&#39;1.0.0.1&#39;</span><span class="o">]}</span>,<span class="w"> </span><span class="s1">&#39;optional&#39;</span>:<span class="w"> </span>True<span class="o">}}</span>
DEBUG:vlan1<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{}</span>
DEBUG:Merged<span class="w"> </span>config:
network:
<span class="w">  </span>bonds:<span class="w"> </span><span class="o">{}</span>
<span class="w">  </span>bridges:<span class="w"> </span><span class="o">{}</span>
<span class="w">  </span>ethernets:
<span class="w">    </span>eno1:
<span class="w">      </span>addresses:
<span class="w">      </span>-<span class="w"> </span><span class="m">192</span>.168.1.3/24
<span class="w">      </span>gateway4:<span class="w"> </span><span class="m">192</span>.168.1.1
<span class="w">      </span>nameservers:
<span class="w">        </span>addresses:
<span class="w">        </span>-<span class="w"> </span><span class="m">1</span>.1.1.1
<span class="w">        </span>-<span class="w"> </span><span class="m">1</span>.0.0.1
<span class="w">      </span>optional:<span class="w"> </span><span class="nb">true</span>
<span class="w">    </span>eno2:<span class="w"> </span><span class="o">{}</span>
<span class="w">  </span>vlans:
<span class="w">    </span>vlan1:
<span class="w">      </span>addresses:
<span class="w">      </span>-<span class="w"> </span><span class="m">192</span>.168.2.3/24
<span class="w">      </span>id:<span class="w"> </span><span class="m">1</span>
<span class="w">      </span>link:<span class="w"> </span>eno1
<span class="w">  </span>wifis:<span class="w"> </span><span class="o">{}</span>

DEBUG:New<span class="w"> </span>interfaces:<span class="w"> </span>set<span class="o">()</span>
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.927:<span class="w"> </span>Processing<span class="w"> </span>input<span class="w"> </span>file<span class="w"> </span>/etc/netplan/60-vlan-init.yaml..
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.927:<span class="w"> </span>starting<span class="w"> </span>new<span class="w"> </span>processing<span class="w"> </span>pass
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.927:<span class="w"> </span>vlan1:<span class="w"> </span>setting<span class="w"> </span>default<span class="w"> </span>backend<span class="w"> </span>to<span class="w"> </span><span class="m">1</span>
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.927:<span class="w"> </span>Configuration<span class="w"> </span>is<span class="w"> </span>valid
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.927:<span class="w"> </span>eno1:<span class="w"> </span>setting<span class="w"> </span>default<span class="w"> </span>backend<span class="w"> </span>to<span class="w"> </span><span class="m">1</span>
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.927:<span class="w"> </span>Configuration<span class="w"> </span>is<span class="w"> </span>valid
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.927:<span class="w"> </span>eno2:<span class="w"> </span>setting<span class="w"> </span>default<span class="w"> </span>backend<span class="w"> </span>to<span class="w"> </span><span class="m">1</span>
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.927:<span class="w"> </span>Configuration<span class="w"> </span>is<span class="w"> </span>valid
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.928:<span class="w"> </span>Generating<span class="w"> </span>output<span class="w"> </span>files..
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.928:<span class="w"> </span>NetworkManager:<span class="w"> </span>definition<span class="w"> </span>eno1<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span><span class="k">for</span><span class="w"> </span>us<span class="w"> </span><span class="o">(</span>backend<span class="w"> </span><span class="m">1</span><span class="o">)</span>
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.928:<span class="w"> </span>NetworkManager:<span class="w"> </span>definition<span class="w"> </span>eno2<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span><span class="k">for</span><span class="w"> </span>us<span class="w"> </span><span class="o">(</span>backend<span class="w"> </span><span class="m">1</span><span class="o">)</span>
**<span class="w"> </span><span class="o">(</span>generate:11029<span class="o">)</span>:<span class="w"> </span>DEBUG:<span class="w"> </span><span class="m">08</span>:52:30.928:<span class="w"> </span>NetworkManager:<span class="w"> </span>definition<span class="w"> </span>vlan1<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span><span class="k">for</span><span class="w"> </span>us<span class="w"> </span><span class="o">(</span>backend<span class="w"> </span><span class="m">1</span><span class="o">)</span>
DEBUG:netplan<span class="w"> </span>generated<span class="w"> </span>networkd<span class="w"> </span>configuration<span class="w"> </span>changed,<span class="w"> </span>restarting<span class="w"> </span>networkd
DEBUG:no<span class="w"> </span>netplan<span class="w"> </span>generated<span class="w"> </span>NM<span class="w"> </span>configuration<span class="w"> </span>exists
DEBUG:eno1<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{}</span>
DEBUG:eno2<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="s1">&#39;eno1&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;addresses&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;192.168.1.3/24&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;gateway4&#39;</span>:<span class="w"> </span><span class="s1">&#39;192.168.1.1&#39;</span>,<span class="w"> </span><span class="s1">&#39;nameservers&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;addresses&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;1.1.1.1&#39;</span>,<span class="w"> </span><span class="s1">&#39;1.0.0.1&#39;</span><span class="o">]}</span>,<span class="w"> </span><span class="s1">&#39;optional&#39;</span>:<span class="w"> </span>True<span class="o">}}</span>
DEBUG:vlan1<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{}</span>
DEBUG:Merged<span class="w"> </span>config:
network:
<span class="w">  </span>bonds:<span class="w"> </span><span class="o">{}</span>
<span class="w">  </span>bridges:<span class="w"> </span><span class="o">{}</span>
<span class="w">  </span>ethernets:
<span class="w">    </span>eno1:
<span class="w">      </span>addresses:
<span class="w">      </span>-<span class="w"> </span><span class="m">192</span>.168.1.3/24
<span class="w">      </span>gateway4:<span class="w"> </span><span class="m">192</span>.168.1.1
<span class="w">      </span>nameservers:
<span class="w">        </span>addresses:
<span class="w">        </span>-<span class="w"> </span><span class="m">1</span>.1.1.1
<span class="w">        </span>-<span class="w"> </span><span class="m">1</span>.0.0.1
<span class="w">      </span>optional:<span class="w"> </span><span class="nb">true</span>
<span class="w">    </span>eno2:<span class="w"> </span><span class="o">{}</span>
<span class="w">  </span>vlans:
<span class="w">    </span>vlan1:
<span class="w">      </span>addresses:
<span class="w">      </span>-<span class="w"> </span><span class="m">192</span>.168.2.3/24
<span class="w">      </span>id:<span class="w"> </span><span class="m">1</span>
<span class="w">      </span>link:<span class="w"> </span>eno1
<span class="w">  </span>wifis:<span class="w"> </span><span class="o">{}</span>

DEBUG:Skipping<span class="w"> </span>non-physical<span class="w"> </span>interface:<span class="w"> </span>lo
DEBUG:device<span class="w"> </span>eno1<span class="w"> </span>operstate<span class="w"> </span>is<span class="w"> </span>up,<span class="w"> </span>not<span class="w"> </span>changing
DEBUG:Skipping<span class="w"> </span>non-physical<span class="w"> </span>interface:<span class="w"> </span>vlan1
DEBUG:Skipping<span class="w"> </span>non-physical<span class="w"> </span>interface:<span class="w"> </span>wlp58s0
DEBUG:Skipping<span class="w"> </span>non-physical<span class="w"> </span>interface:<span class="w"> </span>tun0
DEBUG:<span class="o">{}</span>
DEBUG:netplan<span class="w"> </span>triggering<span class="w"> </span>.link<span class="w"> </span>rules<span class="w"> </span><span class="k">for</span><span class="w"> </span>lo
DEBUG:netplan<span class="w"> </span>triggering<span class="w"> </span>.link<span class="w"> </span>rules<span class="w"> </span><span class="k">for</span><span class="w"> </span>eno1
DEBUG:netplan<span class="w"> </span>triggering<span class="w"> </span>.link<span class="w"> </span>rules<span class="w"> </span><span class="k">for</span><span class="w"> </span>vlan1
DEBUG:netplan<span class="w"> </span>triggering<span class="w"> </span>.link<span class="w"> </span>rules<span class="w"> </span><span class="k">for</span><span class="w"> </span>wlp58s0
DEBUG:netplan<span class="w"> </span>triggering<span class="w"> </span>.link<span class="w"> </span>rules<span class="w"> </span><span class="k">for</span><span class="w"> </span>tun0
Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>keep<span class="w"> </span>these<span class="w"> </span>settings?


Press<span class="w"> </span>ENTER<span class="w"> </span>before<span class="w"> </span>the<span class="w"> </span>timeout<span class="w"> </span>to<span class="w"> </span>accept<span class="w"> </span>the<span class="w"> </span>new<span class="w"> </span>configuration


Changes<span class="w"> </span>will<span class="w"> </span>revert<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">118</span><span class="w"> </span>seconds
Configuration<span class="w"> </span>accepted.
</code></pre></div>

<ul>
<li>If you have success, make the change permanent:</li>
</ul>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>netplan<span class="w"> </span>apply
</code></pre></div>

<ul>
<li>Test it with a ping:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> ping 192.168.2.3
PING 192.168.2.3 (192.168.2.3) 56(84) bytes of data.
64 bytes from 192.168.2.3: icmp_seq=1 ttl=64 time=0.088 ms
64 bytes from 192.168.2.3: icmp_seq=2 ttl=64 time=0.104 ms
^C
--- 192.168.2.3 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1011ms
rtt min/avg/max/mdev = 0.088/0.096/0.104/0.008 ms
</code></pre></div>

<ul>
<li>Check the routes. One for physical interface eno1, another for virtual interface vlan1.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gh">#</span> route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         _gateway        0.0.0.0         UG    0      0        0 eno1
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 eno1
192.168.2.0     0.0.0.0         255.255.255.0   U     0      0        0 vlan1
</code></pre></div>

<ul>
<li>Another way to check routes:</li>
</ul>
<div class="highlight"><pre><span></span><code># ip r
default via 192.168.1.1 dev eno1 proto static 
192.168.1.0/24 dev eno1 proto kernel scope link src 192.168.1.3 
192.168.2.0/24 dev vlan1 proto kernel scope link src 192.168.2.3 
</code></pre></div>

<ul>
<li>Also you can check the ip addresses:</li>
</ul>
<blockquote>
<p>Notice the virtual interface is called <code>vlan1@eno1</code> because it is <em>stacked</em> on top of physical interface eno1.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="n">a</span>
<span class="o">~</span>
<span class="mi">2</span><span class="err">:</span><span class="w"> </span><span class="nl">eno1</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="p">,</span><span class="n">MULTICAST</span><span class="p">,</span><span class="n">UP</span><span class="p">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">fq_codel</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">1</span><span class="nl">c</span><span class="p">:</span><span class="mi">69</span><span class="err">:</span><span class="mi">7</span><span class="nl">a</span><span class="p">:</span><span class="mi">09</span><span class="err">:</span><span class="nl">e7</span><span class="p">:</span><span class="mi">61</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">altname</span><span class="w"> </span><span class="n">enp0s31f6</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">192.168.1.3</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="mf">192.168.1.255</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">eno1</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="nl">fe80</span><span class="p">:</span><span class="err">:</span><span class="mf">1e69</span><span class="err">:</span><span class="mi">7</span><span class="nl">aff</span><span class="p">:</span><span class="nl">fe09</span><span class="p">:</span><span class="n">e761</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="n">link</span><span class="w"> </span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="o">~</span>
<span class="mi">4</span><span class="err">:</span><span class="w"> </span><span class="n">vlan1</span><span class="nv">@eno1</span><span class="err">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">BROADCAST</span><span class="p">,</span><span class="n">MULTICAST</span><span class="p">,</span><span class="n">UP</span><span class="p">,</span><span class="n">LOWER_UP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mtu</span><span class="w"> </span><span class="mi">1500</span><span class="w"> </span><span class="n">qdisc</span><span class="w"> </span><span class="n">noqueue</span><span class="w"> </span><span class="k">state</span><span class="w"> </span><span class="n">UP</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">qlen</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">    </span><span class="n">link</span><span class="o">/</span><span class="n">ether</span><span class="w"> </span><span class="mi">1</span><span class="nl">c</span><span class="p">:</span><span class="mi">69</span><span class="err">:</span><span class="mi">7</span><span class="nl">a</span><span class="p">:</span><span class="mi">09</span><span class="err">:</span><span class="nl">e7</span><span class="p">:</span><span class="mi">61</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="nl">ff</span><span class="p">:</span><span class="n">ff</span>
<span class="w">    </span><span class="n">inet</span><span class="w"> </span><span class="mf">192.168.2.3</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="n">brd</span><span class="w"> </span><span class="mf">192.168.2.255</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">vlan1</span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="w">    </span><span class="n">inet6</span><span class="w"> </span><span class="nl">fe80</span><span class="p">:</span><span class="err">:</span><span class="mf">1e69</span><span class="err">:</span><span class="mi">7</span><span class="nl">aff</span><span class="p">:</span><span class="nl">fe09</span><span class="p">:</span><span class="n">e761</span><span class="o">/</span><span class="mi">64</span><span class="w"> </span><span class="k">scope</span><span class="w"> </span><span class="n">link</span><span class="w"> </span>
<span class="w">       </span><span class="n">valid_lft</span><span class="w"> </span><span class="n">forever</span><span class="w"> </span><span class="n">preferred_lft</span><span class="w"> </span><span class="n">forever</span>
<span class="o">~</span>
</code></pre></div>

<p>Reference: <a href="https://netplan.io/examples">https://netplan.io/examples</a></p>
<h2 id="create-vlan-from-command-line">Create vlan from command line</h2>
<p>Create a vlan called vlan9 on physical device eth0, with vlan id of 9. </p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span>add<span class="w"> </span>link<span class="w"> </span>eth0<span class="w"> </span>name<span class="w"> </span>vlan9<span class="w"> </span><span class="nb">type</span><span class="w"> </span>vlan<span class="w"> </span>id<span class="w"> </span><span class="m">9</span>
</code></pre></div>

<p>Display interface</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ip<span class="w"> </span>-d<span class="w"> </span>link<span class="w"> </span>show<span class="w"> </span>vlan9
<span class="m">4</span>:<span class="w"> </span>vlan9@eth0:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>mode<span class="w"> </span>DEFAULT<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>qlen<span class="w"> </span><span class="m">1000</span>
<span class="w">    </span>link/ether<span class="w"> </span>1c:69:7a:09:e7:61<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff<span class="w"> </span>promiscuity<span class="w"> </span><span class="m">0</span><span class="w"> </span>minmtu<span class="w"> </span><span class="m">0</span><span class="w"> </span>maxmtu<span class="w"> </span><span class="m">65535</span><span class="w"> </span>
<span class="w">    </span>vlan<span class="w"> </span>protocol<span class="w"> </span><span class="m">802</span>.1Q<span class="w"> </span>id<span class="w"> </span><span class="m">9</span><span class="w"> </span>&lt;REORDER_HDR&gt;<span class="w"> </span>addrgenmode<span class="w"> </span>eui64<span class="w"> </span>numtxqueues<span class="w"> </span><span class="m">1</span><span class="w"> </span>numrxqueues<span class="w"> </span><span class="m">1</span><span class="w"> </span>gso_max_size<span class="w"> </span><span class="m">65536</span><span class="w"> </span>gso_max_segs<span class="w"> </span><span class="m">65535</span><span class="w"> </span>
</code></pre></div>

<p>Of course this interface will go away after a reboot, unless you run this command again.</p>
<blockquote>
<p>The -d flag shows full details of an interface. Notice the vlan protocol 802.1Q id is 9.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ip<span class="w"> </span>-d<span class="w"> </span>addr<span class="w"> </span>show
<span class="m">4</span>:<span class="w"> </span>vlan9@eth0:<span class="w"> </span>&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>qdisc<span class="w"> </span>noqueue<span class="w"> </span>state<span class="w"> </span>UP<span class="w"> </span>group<span class="w"> </span>default<span class="w"> </span>
<span class="w">   </span>link/ether<span class="w"> </span><span class="m">96</span>:4a:9c:84:36:51<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff<span class="w"> </span>promiscuity<span class="w"> </span><span class="m">0</span><span class="w"> </span>
<span class="w">   </span>vlan<span class="w"> </span>protocol<span class="w"> </span><span class="m">802</span>.1Q<span class="w"> </span>id<span class="w"> </span><span class="m">9</span><span class="w"> </span>&lt;REORDER_HDR&gt;<span class="w"> </span>
<span class="w">   </span>inet6<span class="w"> </span>fe80::944a:9cff:fe84:3651/64<span class="w"> </span>scope<span class="w"> </span>link<span class="w"> </span>
<span class="w">      </span>valid_lft<span class="w"> </span>forever<span class="w"> </span>preferred_lft<span class="w"> </span>forever
</code></pre></div>

<p>Add an IPv4 address:</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w">                  </span><span class="nx">IP</span><span class="w"> </span><span class="nx">Address</span><span class="w">           </span><span class="nx">Broadcast</span><span class="w">           </span><span class="nx">Device</span>
<span class="err">$</span><span class="w"> </span><span class="nx">sudo</span><span class="w"> </span><span class="nx">ip</span><span class="w"> </span><span class="kd">addr</span><span class="w"> </span><span class="nx">add</span><span class="w"> </span><span class="m m-Double">192.168.100.1</span><span class="o">/</span><span class="mi">24</span><span class="w"> </span><span class="nx">brd</span><span class="w"> </span><span class="m m-Double">192.168.100.255</span><span class="w"> </span><span class="nx">dev</span><span class="w"> </span><span class="nx">vlan9</span>
<span class="err">$</span><span class="w"> </span><span class="nx">sudo</span><span class="w"> </span><span class="nx">ip</span><span class="w"> </span><span class="nx">link</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nx">dev</span><span class="w"> </span><span class="nx">vlan9</span><span class="w"> </span><span class="nx">up</span>
</code></pre></div>

<p>Shut down the link:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>dev<span class="w"> </span>vlan9<span class="w"> </span>down
</code></pre></div>

<p>Remove VLAN interface:</p>
<div class="highlight"><pre><span></span><code># sudo ip link delete vlan9
</code></pre></div>

<p>Reference: </p>
<ul>
<li><a href="https://wiki.archlinux.org/title/VLAN">https://wiki.archlinux.org/title/VLAN</a></li>
</ul>
<h3 id="redhat-version">Redhat Version</h3>
<p>Install nmstate package</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>nmstate
</code></pre></div>

<p>Create config file</p>
<p>File: /etc/nmstate/60-create-vlan.yml</p>
<div class="highlight"><pre><span></span><code><span class="o">---</span>
<span class="nx">interfaces</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">vlan10</span>
<span class="w">  </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">vlan</span>
<span class="w">  </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">  </span><span class="nx">ipv4</span><span class="p">:</span>
<span class="w">    </span><span class="nx">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="nx">address</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">ip</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">192.168.22.1</span>
<span class="w">      </span><span class="nx">prefix</span><span class="o">-</span><span class="nx">length</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span>
<span class="w">    </span><span class="nx">dhcp</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="nx">ipv6</span><span class="p">:</span>
<span class="w">    </span><span class="nx">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="nx">vlan</span><span class="p">:</span>
<span class="w">    </span><span class="kd">base</span><span class="o">-</span><span class="nx">iface</span><span class="p">:</span><span class="w"> </span><span class="nx">eno1</span>
<span class="w">    </span><span class="nx">id</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span>
<span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">eno1</span>
<span class="w">  </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">ethernet</span>
<span class="w">  </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
</code></pre></div>

<p>Apply config file</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sudo<span class="w"> </span>nmstatectl<span class="w"> </span>apply<span class="w"> </span>/etc/nmstate/60-create-vlan.yml
</code></pre></div>

<ul>
<li>Verification</li>
</ul>
<p>Display the status of the devices and connections:</p>
<div class="highlight"><pre><span></span><code># nmcli device status
  DEVICE      TYPE      STATE      CONNECTION
  vlan10      vlan      connected  vlan10
</code></pre></div>

<p>Display all settings of the connection profile:</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">nmcli</span><span class="w"> </span><span class="nx">connection</span><span class="w"> </span><span class="nx">show</span><span class="w"> </span><span class="nx">vlan10</span>
<span class="w">  </span><span class="nx">connection</span><span class="p">.</span><span class="nx">id</span><span class="p">:</span><span class="w">              </span><span class="nx">vlan10</span>
<span class="w">  </span><span class="nx">connection</span><span class="p">.</span><span class="nx">uuid</span><span class="p">:</span><span class="w">            </span><span class="mi">1722970</span><span class="nx">f</span><span class="o">-</span><span class="mi">788</span><span class="nx">e</span><span class="o">-</span><span class="mi">4</span><span class="nx">f81</span><span class="o">-</span><span class="nx">bd7d</span><span class="o">-</span><span class="nx">a86bf21c9df5</span>
<span class="w">  </span><span class="nx">connection</span><span class="p">.</span><span class="nx">stable</span><span class="o">-</span><span class="nx">id</span><span class="p">:</span><span class="w">       </span><span class="o">--</span>
<span class="w">  </span><span class="nx">connection</span><span class="p">.</span><span class="k">type</span><span class="p">:</span><span class="w">            </span><span class="nx">vlan</span>
<span class="w">  </span><span class="nx">connection</span><span class="p">.</span><span class="kd">interface</span><span class="o">-</span><span class="nx">name</span><span class="p">:</span><span class="w">  </span><span class="nx">vlan10</span>
<span class="w">  </span><span class="o">...</span>
</code></pre></div>

<p>Display the connection settings in YAML format:</p>
<div class="highlight"><pre><span></span><code>#<span class="w"> </span><span class="nv">nmstatectl</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="nv">vlan10</span>
</code></pre></div>

<p>Permanent setup is performed by nmstate.service. It  invokes  nmstatectl  service  command  which apply all network state files ending with .yml in /etc/nmstate folder.  The applied network state file will be renamed with postfix .applied to prevent repeated applied on next service start. Rename the file to .yml and restart nmstate to make changes active.</p>
<div class="highlight"><pre><span></span><code><span class="o">$</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">systemctl</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="n">nmstate</span><span class="o">.</span><span class="n">service</span>
<span class="err">●</span><span class="w"> </span><span class="n">nmstate</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Apply</span><span class="w"> </span><span class="n">nmstate</span><span class="w"> </span><span class="n">on</span><span class="o">-</span><span class="n">disk</span><span class="w"> </span><span class="n">state</span>
<span class="w">     </span><span class="n">Loaded</span><span class="p">:</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="o">/</span><span class="n">nmstate</span><span class="o">.</span><span class="n">service</span><span class="p">;</span><span class="w"> </span><span class="n">enabled</span><span class="p">;</span><span class="w"> </span><span class="n">preset</span><span class="p">:</span><span class="w"> </span><span class="n">disabled</span><span class="p">)</span>
<span class="w">     </span><span class="n">Active</span><span class="p">:</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="n">exited</span><span class="p">)</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="n">Sat</span><span class="w"> </span><span class="mi">2023</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">EDT</span><span class="p">;</span><span class="w"> </span><span class="mi">50</span><span class="n">s</span><span class="w"> </span><span class="n">ago</span>
<span class="w">       </span><span class="n">Docs</span><span class="p">:</span><span class="w"> </span><span class="n">man</span><span class="p">:</span><span class="n">nmstate</span><span class="o">.</span><span class="n">service</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="w">             </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">nmstate</span><span class="o">.</span><span class="n">io</span>
<span class="w">    </span><span class="n">Process</span><span class="p">:</span><span class="w"> </span><span class="mi">77788</span><span class="w"> </span><span class="n">ExecStart</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">nmstatectl</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="n">SUCCESS</span><span class="p">)</span>
<span class="w">   </span><span class="n">Main</span><span class="w"> </span><span class="n">PID</span><span class="p">:</span><span class="w"> </span><span class="mi">77788</span><span class="w"> </span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">exited</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="o">/</span><span class="n">SUCCESS</span><span class="p">)</span>
<span class="w">        </span><span class="n">CPU</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="n">ms</span>

<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstate</span><span class="p">::</span><span class="n">nm</span><span class="p">::</span><span class="n">query_apply</span><span class="p">::</span><span class="n">profile</span><span class="p">]</span><span class="w"> </span><span class="n">Modifying</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="n">UUID</span><span class="w"> </span><span class="n">Some</span><span class="p">(</span><span class="s2">&quot;050da471-2365-4e&gt;</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstate</span><span class="p">::</span><span class="n">nm</span><span class="p">::</span><span class="n">query_apply</span><span class="p">::</span><span class="n">profile</span><span class="p">]</span><span class="w"> </span><span class="n">Reapplying</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="mi">1</span><span class="n">f39a84e</span><span class="o">-</span><span class="mi">5</span><span class="n">d13</span><span class="o">-</span><span class="mi">3</span><span class="n">ea0</span><span class="o">-</span><span class="mi">8</span><span class="n">b34</span><span class="o">-</span><span class="n">fd</span><span class="o">&gt;</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstate</span><span class="p">::</span><span class="n">nm</span><span class="p">::</span><span class="n">query_apply</span><span class="p">::</span><span class="n">profile</span><span class="p">]</span><span class="w"> </span><span class="n">Reapplying</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="mi">0</span><span class="n">a0d9431</span><span class="o">-</span><span class="mi">27</span><span class="n">a5</span><span class="o">-</span><span class="mf">4e7</span><span class="n">e</span><span class="o">-</span><span class="n">b370</span><span class="o">-</span><span class="mi">47</span><span class="o">&gt;</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstate</span><span class="p">::</span><span class="n">nispor</span><span class="p">::</span><span class="n">base_iface</span><span class="p">]</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">unsupported</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">Tun</span><span class="p">:</span><span class="w"> </span><span class="n">vnet5</span><span class="p">,</span><span class="w"> </span><span class="n">ignoring</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstate</span><span class="p">::</span><span class="n">nispor</span><span class="p">::</span><span class="n">show</span><span class="p">]</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">unsupported</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">vnet5</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">Tun</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstate</span><span class="p">::</span><span class="n">nm</span><span class="p">::</span><span class="n">show</span><span class="p">]</span><span class="w"> </span><span class="n">Got</span><span class="w"> </span><span class="n">unsupported</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">tun</span><span class="p">:</span><span class="w"> </span><span class="n">vnet5</span><span class="p">,</span><span class="w"> </span><span class="n">ignoring</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstate</span><span class="p">::</span><span class="n">query_apply</span><span class="p">::</span><span class="n">net_state</span><span class="p">]</span><span class="w"> </span><span class="n">Destroyed</span><span class="w"> </span><span class="n">checkpoint</span><span class="w"> </span><span class="o">/</span><span class="n">org</span><span class="o">/</span><span class="n">freedesktop</span><span class="o">/</span><span class="n">NetworkManag</span><span class="o">&gt;</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstatectl</span><span class="p">::</span><span class="n">service</span><span class="p">]</span><span class="w"> </span><span class="n">Applied</span><span class="w"> </span><span class="n">nmstate</span><span class="w"> </span><span class="n">config</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nmstate</span><span class="o">/</span><span class="mi">60</span><span class="o">-</span><span class="n">create</span><span class="o">-</span><span class="n">vlan</span><span class="o">.</span><span class="n">yml</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">nmstatectl</span><span class="p">[</span><span class="mi">77788</span><span class="p">]:</span><span class="w"> </span><span class="p">[</span><span class="mi">2022</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">10</span><span class="n">T19</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="n">Z</span><span class="w"> </span><span class="n">INFO</span><span class="w">  </span><span class="n">nmstatectl</span><span class="p">::</span><span class="n">service</span><span class="p">]</span><span class="w"> </span><span class="n">Renamed</span><span class="w"> </span><span class="n">applied</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nmstate</span><span class="o">/</span><span class="mi">60</span><span class="o">-</span><span class="n">create</span><span class="o">-</span><span class="n">vlan</span><span class="o">.</span><span class="n">yml</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nm</span><span class="o">&gt;</span>
<span class="n">Jun</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">15</span><span class="p">:</span><span class="mi">31</span><span class="p">:</span><span class="mi">04</span><span class="w"> </span><span class="n">bob</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">systemd</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="n">Finished</span><span class="w"> </span><span class="n">Apply</span><span class="w"> </span><span class="n">nmstate</span><span class="w"> </span><span class="n">on</span><span class="o">-</span><span class="n">disk</span><span class="w"> </span><span class="n">state</span><span class="o">.</span>
</code></pre></div>

<p>Reference:</p>
<ul>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_managing_networking/index#proc_configuring-vlan-tagging-by-using-nmstatectl_configuring-vlan-tagging">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_managing_networking/index#proc_configuring-vlan-tagging-by-using-nmstatectl_configuring-vlan-tagging</a></li>
</ul>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://lwn.net/">Linux Weekly News</a></li>
                            <li><a href="https://fullcirclemagazine.org/">Full Circle Magazine</a></li>
                            <li><a href="https://www.linuxjournal.com/">Linux Journal</a></li>
                            <li><a href="https://www.linux-magazine.com/">Linux Magazine</a></li>
                            <li><a href="https://www.thefarside.com/">The Far Side</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://dfcsoftware.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://fosstodon.org/@LinuxintheHouse">Feedback</a></li>
                            <li><a href="https://fosstodon.org/@LinuxintheHouse.rss">Mastodon RSS feed</a></li>
                            <li><a href="https://linux-in-the-house.pages.dev/">Book</a></li>
                            <li><a href="/author/don-cohoon.html">Created by: Don Cohoon</a></li>
                            <li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License </a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>
                Site by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, via <a rel="nofollow" href="https://www.python.org/">Python</a>.
                </p><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                <p> Version:  3.24 </p>
        </footer><!-- /#contentinfo -->

</body>
</html>